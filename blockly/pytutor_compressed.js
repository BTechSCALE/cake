'use strict';var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var f=a.length,d=0;d<f;d++){var e=a[d];if(b.call(c,e,d,a))return{i:d,v:e}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(a,b){var c=$jscomp.propertyToPolyfillSymbol[b];if(null==c)return a[b];c=a[c];return void 0!==c?c:a[b]};
$jscomp.polyfill=function(a,b,c,f){b&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,b,c,f):$jscomp.polyfillUnisolated(a,b,c,f))};$jscomp.polyfillUnisolated=function(a,b,c,f){c=$jscomp.global;a=a.split(".");for(f=0;f<a.length-1;f++){var d=a[f];if(!(d in c))return;c=c[d]}a=a[a.length-1];f=c[a];b=b(f);b!=f&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})};
$jscomp.polyfillIsolated=function(a,b,c,f){var d=a.split(".");a=1===d.length;f=d[0];f=!a&&f in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var e=0;e<d.length-1;e++){var g=d[e];if(!(g in f))return;f=f[g]}d=d[d.length-1];c=$jscomp.IS_SYMBOL_NATIVE&&"es6"===c?f[d]:null;b=b(c);null!=b&&(a?$jscomp.defineProperty($jscomp.polyfills,d,{configurable:!0,writable:!0,value:b}):b!==c&&($jscomp.propertyToPolyfillSymbol[d]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(d):$jscomp.POLYFILL_PREFIX+d,d=
$jscomp.propertyToPolyfillSymbol[d],$jscomp.defineProperty(f,d,{configurable:!0,writable:!0,value:b})))};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(b,c){return $jscomp.findInternal(this,b,c).v}},"es6","es3");$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(a){if(a)return a;var b=function(d,e){this.$jscomp$symbol$id_=d;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:e})};b.prototype.toString=function(){return this.$jscomp$symbol$id_};var c=0,f=function(d){if(this instanceof f)throw new TypeError("Symbol is not a constructor");return new b("jscomp_symbol_"+(d||"")+"_"+c++,d)};return f},"es6","es3");$jscomp.initSymbolIterator=function(){};
$jscomp.polyfill("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),c=0;c<b.length;c++){var f=$jscomp.global[b[c]];"function"===typeof f&&"function"!=typeof f.prototype[a]&&$jscomp.defineProperty(f.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return a},"es6",
"es3");$jscomp.initSymbolAsyncIterator=function(){};$jscomp.iteratorPrototype=function(a){a={next:a};a[Symbol.iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,b){a instanceof String&&(a+="");var c=0,f={next:function(){if(c<a.length){var d=c++;return{value:b(d,a[d]),done:!1}}f.next=function(){return{done:!0,value:void 0}};return f.next()}};f[Symbol.iterator]=function(){return f};return f};
$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(b){return b})}},"es6","es3");var COMPILED=!0,goog=goog||{};goog.global=this||self;goog.isDef=function(a){return void 0!==a};goog.isString=function(a){return"string"==typeof a};goog.isBoolean=function(a){return"boolean"==typeof a};goog.isNumber=function(a){return"number"==typeof a};
goog.exportPath_=function(a,b,c){a=a.split(".");c=c||goog.global;a[0]in c||"undefined"==typeof c.execScript||c.execScript("var "+a[0]);for(var f;a.length&&(f=a.shift());)!a.length&&goog.isDef(b)?c[f]=b:c=c[f]&&c[f]!==Object.prototype[f]?c[f]:c[f]={}};
goog.define=function(a,b){if(!COMPILED){var c=goog.global.CLOSURE_UNCOMPILED_DEFINES,f=goog.global.CLOSURE_DEFINES;c&&void 0===c.nodeType&&Object.prototype.hasOwnProperty.call(c,a)?b=c[a]:f&&void 0===f.nodeType&&Object.prototype.hasOwnProperty.call(f,a)&&(b=f[a])}return b};goog.FEATURESET_YEAR=2012;goog.DEBUG=!0;goog.LOCALE="en";goog.TRUSTED_SITE=!0;goog.STRICT_MODE_COMPATIBLE=!1;goog.DISALLOW_TEST_ONLY_CODE=COMPILED&&!goog.DEBUG;goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1;
goog.provide=function(a){if(goog.isInModuleLoader_())throw Error("goog.provide cannot be used within a module.");if(!COMPILED&&goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');goog.constructNamespace_(a)};goog.constructNamespace_=function(a,b){if(!COMPILED){delete goog.implicitNamespaces_[a];for(var c=a;(c=c.substring(0,c.lastIndexOf(".")))&&!goog.getObjectByName(c);)goog.implicitNamespaces_[c]=!0}goog.exportPath_(a,b)};
goog.getScriptNonce=function(a){if(a&&a!=goog.global)return goog.getScriptNonce_(a.document);null===goog.cspNonce_&&(goog.cspNonce_=goog.getScriptNonce_(goog.global.document));return goog.cspNonce_};goog.NONCE_PATTERN_=/^[\w+/_-]+[=]{0,2}$/;goog.cspNonce_=null;goog.getScriptNonce_=function(a){return(a=a.querySelector&&a.querySelector("script[nonce]"))&&(a=a.nonce||a.getAttribute("nonce"))&&goog.NONCE_PATTERN_.test(a)?a:""};goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/;
goog.module=function(a){if(!goog.isString(a)||!a||-1==a.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier");if(!goog.isInGoogModuleLoader_())throw Error("Module "+a+" has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You're likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.");
if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");goog.moduleLoaderState_.moduleName=a;if(!COMPILED){if(goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');delete goog.implicitNamespaces_[a]}};goog.module.get=function(a){return goog.module.getInternal_(a)};
goog.module.getInternal_=function(a){if(!COMPILED){if(a in goog.loadedModules_)return goog.loadedModules_[a].exports;if(!goog.implicitNamespaces_[a])return a=goog.getObjectByName(a),null!=a?a:null}return null};goog.ModuleType={ES6:"es6",GOOG:"goog"};goog.moduleLoaderState_=null;goog.isInModuleLoader_=function(){return goog.isInGoogModuleLoader_()||goog.isInEs6ModuleLoader_()};goog.isInGoogModuleLoader_=function(){return!!goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.GOOG};
goog.isInEs6ModuleLoader_=function(){if(goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.ES6)return!0;var a=goog.global.$jscomp;return a?"function"!=typeof a.getCurrentModulePath?!1:!!a.getCurrentModulePath():!1};
goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInGoogModuleLoader_())throw Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0};
goog.declareModuleId=function(a){if(!COMPILED){if(!goog.isInEs6ModuleLoader_())throw Error("goog.declareModuleId may only be called from within an ES6 module");if(goog.moduleLoaderState_&&goog.moduleLoaderState_.moduleName)throw Error("goog.declareModuleId may only be called once per module.");if(a in goog.loadedModules_)throw Error('Module with namespace "'+a+'" already exists.');}if(goog.moduleLoaderState_)goog.moduleLoaderState_.moduleName=a;else{var b=goog.global.$jscomp;if(!b||"function"!=typeof b.getCurrentModulePath)throw Error('Module with namespace "'+
a+'" has been loaded incorrectly.');b=b.require(b.getCurrentModulePath());goog.loadedModules_[a]={exports:b,type:goog.ModuleType.ES6,moduleId:a}}};goog.setTestOnly=function(a){if(goog.DISALLOW_TEST_ONLY_CODE)throw a=a||"",Error("Importing test-only code into non-debug environment"+(a?": "+a:"."));};goog.forwardDeclare=function(a){};
COMPILED||(goog.isProvided_=function(a){return a in goog.loadedModules_||!goog.implicitNamespaces_[a]&&goog.isDefAndNotNull(goog.getObjectByName(a))},goog.implicitNamespaces_={"goog.module":!0});goog.getObjectByName=function(a,b){a=a.split(".");b=b||goog.global;for(var c=0;c<a.length;c++)if(b=b[a[c]],!goog.isDefAndNotNull(b))return null;return b};goog.globalize=function(a,b){b=b||goog.global;for(var c in a)b[c]=a[c]};
goog.addDependency=function(a,b,c,f){!COMPILED&&goog.DEPENDENCIES_ENABLED&&goog.debugLoader_.addDependency(a,b,c,f)};goog.ENABLE_DEBUG_LOADER=!0;goog.logToConsole_=function(a){goog.global.console&&goog.global.console.error(a)};
goog.require=function(a){if(!COMPILED){goog.ENABLE_DEBUG_LOADER&&goog.debugLoader_.requested(a);if(goog.isProvided_(a)){if(goog.isInModuleLoader_())return goog.module.getInternal_(a)}else if(goog.ENABLE_DEBUG_LOADER){var b=goog.moduleLoaderState_;goog.moduleLoaderState_=null;try{goog.debugLoader_.load_(a)}finally{goog.moduleLoaderState_=b}}return null}};goog.requireType=function(a){return{}};goog.basePath="";goog.nullFunction=function(){};
goog.abstractMethod=function(){throw Error("unimplemented abstract method");};goog.addSingletonGetter=function(a){a.instance_=void 0;a.getInstance=function(){if(a.instance_)return a.instance_;goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=a);return a.instance_=new a}};goog.instantiatedSingletons_=[];goog.LOAD_MODULE_USING_EVAL=!0;goog.SEAL_MODULE_EXPORTS=goog.DEBUG;goog.loadedModules_={};goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER;goog.TRANSPILE="detect";
goog.ASSUME_ES_MODULES_TRANSPILED=!1;goog.TRANSPILE_TO_LANGUAGE="";goog.TRANSPILER="transpile.js";goog.hasBadLetScoping=null;goog.useSafari10Workaround=function(){if(null==goog.hasBadLetScoping){try{var a=!eval('"use strict";let x = 1; function f() { return typeof x; };f() == "number";')}catch(b){a=!1}goog.hasBadLetScoping=a}return goog.hasBadLetScoping};goog.workaroundSafari10EvalBug=function(a){return"(function(){"+a+"\n;})();\n"};
goog.loadModule=function(a){var b=goog.moduleLoaderState_;try{goog.moduleLoaderState_={moduleName:"",declareLegacyNamespace:!1,type:goog.ModuleType.GOOG};if(goog.isFunction(a))var c=a.call(void 0,{});else if(goog.isString(a))goog.useSafari10Workaround()&&(a=goog.workaroundSafari10EvalBug(a)),c=goog.loadModuleFromSource_.call(void 0,a);else throw Error("Invalid module definition");var f=goog.moduleLoaderState_.moduleName;if(goog.isString(f)&&f)goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(f,
c):goog.SEAL_MODULE_EXPORTS&&Object.seal&&"object"==typeof c&&null!=c&&Object.seal(c),goog.loadedModules_[f]={exports:c,type:goog.ModuleType.GOOG,moduleId:goog.moduleLoaderState_.moduleName};else throw Error('Invalid module name "'+f+'"');}finally{goog.moduleLoaderState_=b}};goog.loadModuleFromSource_=function(a){eval(a);return{}};goog.normalizePath_=function(a){a=a.split("/");for(var b=0;b<a.length;)"."==a[b]?a.splice(b,1):b&&".."==a[b]&&a[b-1]&&".."!=a[b-1]?a.splice(--b,2):b++;return a.join("/")};
goog.loadFileSync_=function(a){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(a);try{var b=new goog.global.XMLHttpRequest;b.open("get",a,!1);b.send();return 0==b.status||200==b.status?b.responseText:null}catch(c){return null}};
goog.transpile_=function(a,b,c){var f=goog.global.$jscomp;f||(goog.global.$jscomp=f={});var d=f.transpile;if(!d){var e=goog.basePath+goog.TRANSPILER,g=goog.loadFileSync_(e);if(g){(function(){(0,eval)(g+"\n//# sourceURL="+e)}).call(goog.global);if(goog.global.$gwtExport&&goog.global.$gwtExport.$jscomp&&!goog.global.$gwtExport.$jscomp.transpile)throw Error('The transpiler did not properly export the "transpile" method. $gwtExport: '+JSON.stringify(goog.global.$gwtExport));goog.global.$jscomp.transpile=
goog.global.$gwtExport.$jscomp.transpile;f=goog.global.$jscomp;d=f.transpile}}d||(d=f.transpile=function(l,r){goog.logToConsole_(r+" requires transpilation but no transpiler was found.");return l});return d(a,b,c)};
goog.typeOf=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b};goog.isNull=function(a){return null===a};goog.isDefAndNotNull=function(a){return null!=a};goog.isArray=function(a){return"array"==goog.typeOf(a)};goog.isArrayLike=function(a){var b=goog.typeOf(a);return"array"==b||"object"==b&&"number"==typeof a.length};goog.isDateLike=function(a){return goog.isObject(a)&&"function"==typeof a.getFullYear};goog.isFunction=function(a){return"function"==goog.typeOf(a)};
goog.isObject=function(a){var b=typeof a;return"object"==b&&null!=a||"function"==b};goog.getUid=function(a){return a[goog.UID_PROPERTY_]||(a[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.hasUid=function(a){return!!a[goog.UID_PROPERTY_]};goog.removeUid=function(a){null!==a&&"removeAttribute"in a&&a.removeAttribute(goog.UID_PROPERTY_);try{delete a[goog.UID_PROPERTY_]}catch(b){}};goog.UID_PROPERTY_="closure_uid_"+(1E9*Math.random()>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;
goog.removeHashCode=goog.removeUid;goog.cloneObject=function(a){var b=goog.typeOf(a);if("object"==b||"array"==b){if("function"===typeof a.clone)return a.clone();b="array"==b?[]:{};for(var c in a)b[c]=goog.cloneObject(a[c]);return b}return a};goog.bindNative_=function(a,b,c){return a.call.apply(a.bind,arguments)};
goog.bindJs_=function(a,b,c){if(!a)throw Error();if(2<arguments.length){var f=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(d,f);return a.apply(b,d)}}return function(){return a.apply(b,arguments)}};goog.bind=function(a,b,c){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)};
goog.partial=function(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var f=c.slice();f.push.apply(f,arguments);return a.apply(this,f)}};goog.mixin=function(a,b){for(var c in b)a[c]=b[c]};goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date};
goog.globalEval=function(a){if(goog.global.execScript)goog.global.execScript(a,"JavaScript");else if(goog.global.eval){if(null==goog.evalWorksForGlobals_){try{goog.global.eval("var _evalTest_ = 1;")}catch(f){}if("undefined"!=typeof goog.global._evalTest_){try{delete goog.global._evalTest_}catch(f){}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1}if(goog.evalWorksForGlobals_)goog.global.eval(a);else{var b=goog.global.document,c=b.createElement("SCRIPT");c.type="text/javascript";c.defer=
!1;c.appendChild(b.createTextNode(a));b.head.appendChild(c);b.head.removeChild(c)}}else throw Error("goog.globalEval not available");};goog.evalWorksForGlobals_=null;
goog.getCssName=function(a,b){if("."==String(a).charAt(0))throw Error('className passed in goog.getCssName must not start with ".". You passed: '+a);var c=function(d){return goog.cssNameMapping_[d]||d},f=function(d){d=d.split("-");for(var e=[],g=0;g<d.length;g++)e.push(c(d[g]));return e.join("-")};f=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?c:f:function(d){return d};a=b?a+"-"+f(b):f(a);return goog.global.CLOSURE_CSS_NAME_MAP_FN?goog.global.CLOSURE_CSS_NAME_MAP_FN(a):a};
goog.setCssNameMapping=function(a,b){goog.cssNameMapping_=a;goog.cssNameMappingStyle_=b};!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING);goog.getMsg=function(a,b,c){c&&c.html&&(a=a.replace(/</g,"&lt;"));b&&(a=a.replace(/\{\$([^}]+)}/g,function(f,d){return null!=b&&d in b?b[d]:f}));return a};goog.getMsgWithFallback=function(a,b){return a};goog.exportSymbol=function(a,b,c){goog.exportPath_(a,b,c)};
goog.exportProperty=function(a,b,c){a[b]=c};goog.inherits=function(a,b){function c(){}c.prototype=b.prototype;a.superClass_=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.base=function(f,d,e){for(var g=Array(arguments.length-2),l=2;l<arguments.length;l++)g[l-2]=arguments[l];return b.prototype[d].apply(f,g)}};
goog.base=function(a,b,c){var f=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!f)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if("undefined"!==typeof f.superClass_){for(var d=Array(arguments.length-1),e=1;e<arguments.length;e++)d[e-1]=arguments[e];return f.superClass_.constructor.apply(a,d)}if("string"!=typeof b&&"symbol"!=typeof b)throw Error("method names provided to goog.base must be a string or a symbol");
d=Array(arguments.length-2);for(e=2;e<arguments.length;e++)d[e-2]=arguments[e];e=!1;for(var g=a.constructor.prototype;g;g=Object.getPrototypeOf(g))if(g[b]===f)e=!0;else if(e)return g[b].apply(a,d);if(a[b]===f)return a.constructor.prototype[b].apply(a,d);throw Error("goog.base called from a method of one name to a method of a different name");};goog.scope=function(a){if(goog.isInModuleLoader_())throw Error("goog.scope is not supported within a module.");a.call(goog.global)};
COMPILED||(goog.global.COMPILED=COMPILED);goog.defineClass=function(a,b){var c=b.constructor,f=b.statics;c&&c!=Object.prototype.constructor||(c=function(){throw Error("cannot instantiate an interface (no constructor defined).");});c=goog.defineClass.createSealingConstructor_(c,a);a&&goog.inherits(c,a);delete b.constructor;delete b.statics;goog.defineClass.applyProperties_(c.prototype,b);null!=f&&(f instanceof Function?f(c):goog.defineClass.applyProperties_(c,f));return c};
goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG;goog.defineClass.createSealingConstructor_=function(a,b){if(!goog.defineClass.SEAL_CLASS_INSTANCES)return a;var c=!goog.defineClass.isUnsealable_(b),f=function(){var d=a.apply(this,arguments)||this;d[goog.UID_PROPERTY_]=d[goog.UID_PROPERTY_];this.constructor===f&&c&&Object.seal instanceof Function&&Object.seal(d);return d};return f};goog.defineClass.isUnsealable_=function(a){return a&&a.prototype&&a.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]};
goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");goog.defineClass.applyProperties_=function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c]);for(var f=0;f<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;f++)c=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[f],Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};
goog.tagUnsealableClass=function(a){!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES&&(a.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=!0)};goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable";
!COMPILED&&goog.DEPENDENCIES_ENABLED&&(goog.inHtmlDocument_=function(){var a=goog.global.document;return null!=a&&"write"in a},goog.isDocumentLoading_=function(){var a=goog.global.document;return a.attachEvent?"complete"!=a.readyState:"loading"==a.readyState},goog.findBasePath_=function(){if(goog.isDef(goog.global.CLOSURE_BASE_PATH)&&goog.isString(goog.global.CLOSURE_BASE_PATH))goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_()){var a=goog.global.document,b=a.currentScript;
a=b?[b]:a.getElementsByTagName("SCRIPT");for(b=a.length-1;0<=b;--b){var c=a[b].src,f=c.lastIndexOf("?");f=-1==f?c.length:f;if("base.js"==c.substr(f-7,7)){goog.basePath=c.substr(0,f-7);break}}}},goog.findBasePath_(),goog.Transpiler=function(){this.requiresTranspilation_=null;this.transpilationTarget_=goog.TRANSPILE_TO_LANGUAGE},goog.Transpiler.prototype.createRequiresTranspilation_=function(){function a(g,l){d?f[g]=!0:l()?(c=g,f[g]=!1):d=f[g]=!0}function b(g){try{return!!eval(g)}catch(l){return!1}}
var c="es3",f={es3:!1},d=!1,e=goog.global.navigator&&goog.global.navigator.userAgent?goog.global.navigator.userAgent:"";a("es5",function(){return b("[1,].length==1")});a("es6",function(){return e.match(/Edge\/(\d+)(\.\d)*/i)?!1:b('(()=>{"use strict";class X{constructor(){if(new.target!=String)throw 1;this.x=42}}let q=Reflect.construct(X,[],String);if(q.x!=42||!(q instanceof String))throw 1;for(const a of[2,3]){if(a==2)continue;function f(z={a}){let a=0;return z.a}{function f(){return 0;}}return f()==3}})()')});
a("es7",function(){return b("2 ** 2 == 4")});a("es8",function(){return b("async () => 1, true")});a("es9",function(){return b("({...rest} = {}), true")});a("es_next",function(){return!1});return{target:c,map:f}},goog.Transpiler.prototype.needsTranspile=function(a,b){if("always"==goog.TRANSPILE)return!0;if("never"==goog.TRANSPILE)return!1;if(!this.requiresTranspilation_){var c=this.createRequiresTranspilation_();this.requiresTranspilation_=c.map;this.transpilationTarget_=this.transpilationTarget_||
c.target}if(a in this.requiresTranspilation_)return this.requiresTranspilation_[a]?!0:!goog.inHtmlDocument_()||"es6"!=b||"noModule"in goog.global.document.createElement("script")?!1:!0;throw Error("Unknown language mode: "+a);},goog.Transpiler.prototype.transpile=function(a,b){return goog.transpile_(a,b,this.transpilationTarget_)},goog.transpiler_=new goog.Transpiler,goog.protectScriptTag_=function(a){return a.replace(/<\/(SCRIPT)/ig,"\\x3c/$1")},goog.DebugLoader_=function(){this.dependencies_={};
this.idToPath_={};this.written_={};this.loadingDeps_=[];this.depsToLoad_=[];this.paused_=!1;this.factory_=new goog.DependencyFactory(goog.transpiler_);this.deferredCallbacks_={};this.deferredQueue_=[]},goog.DebugLoader_.prototype.bootstrap=function(a,b){function c(){f&&(goog.global.setTimeout(f,0),f=null)}var f=b;if(a.length){b=[];for(var d=0;d<a.length;d++){var e=this.getPathFromDeps_(a[d]);if(!e)throw Error("Unregonized namespace: "+a[d]);b.push(this.dependencies_[e])}e=goog.require;var g=0;for(d=
0;d<a.length;d++)e(a[d]),b[d].onLoad(function(){++g==a.length&&c()})}else c()},goog.DebugLoader_.prototype.loadClosureDeps=function(){this.depsToLoad_.push(this.factory_.createDependency(goog.normalizePath_(goog.basePath+"deps.js"),"deps.js",[],[],{},!1));this.loadDeps_()},goog.DebugLoader_.prototype.requested=function(a,b){(a=this.getPathFromDeps_(a))&&(b||this.areDepsLoaded_(this.dependencies_[a].requires))&&(b=this.deferredCallbacks_[a])&&(delete this.deferredCallbacks_[a],b())},goog.DebugLoader_.prototype.setDependencyFactory=
function(a){this.factory_=a},goog.DebugLoader_.prototype.load_=function(a){if(this.getPathFromDeps_(a)){var b=this,c=[],f=function(d){var e=b.getPathFromDeps_(d);if(!e)throw Error("Bad dependency path or symbol: "+d);if(!b.written_[e]){b.written_[e]=!0;d=b.dependencies_[e];for(e=0;e<d.requires.length;e++)goog.isProvided_(d.requires[e])||f(d.requires[e]);c.push(d)}};f(a);a=!!this.depsToLoad_.length;this.depsToLoad_=this.depsToLoad_.concat(c);this.paused_||a||this.loadDeps_()}else throw a="goog.require could not find: "+
a,goog.logToConsole_(a),Error(a);},goog.DebugLoader_.prototype.loadDeps_=function(){for(var a=this,b=this.paused_;this.depsToLoad_.length&&!b;)(function(){var c=!1,f=a.depsToLoad_.shift(),d=!1;a.loading_(f);var e={pause:function(){if(c)throw Error("Cannot call pause after the call to load.");b=!0},resume:function(){c?a.resume_():b=!1},loaded:function(){if(d)throw Error("Double call to loaded.");d=!0;a.loaded_(f)},pending:function(){for(var g=[],l=0;l<a.loadingDeps_.length;l++)g.push(a.loadingDeps_[l]);
return g},setModuleState:function(g){goog.moduleLoaderState_={type:g,moduleName:"",declareLegacyNamespace:!1}},registerEs6ModuleExports:function(g,l,r){r&&(goog.loadedModules_[r]={exports:l,type:goog.ModuleType.ES6,moduleId:r||""})},registerGoogModuleExports:function(g,l){goog.loadedModules_[g]={exports:l,type:goog.ModuleType.GOOG,moduleId:g}},clearModuleState:function(){goog.moduleLoaderState_=null},defer:function(g){if(c)throw Error("Cannot register with defer after the call to load.");a.defer_(f,
g)},areDepsLoaded:function(){return a.areDepsLoaded_(f.requires)}};try{f.load(e)}finally{c=!0}})();b&&this.pause_()},goog.DebugLoader_.prototype.pause_=function(){this.paused_=!0},goog.DebugLoader_.prototype.resume_=function(){this.paused_&&(this.paused_=!1,this.loadDeps_())},goog.DebugLoader_.prototype.loading_=function(a){this.loadingDeps_.push(a)},goog.DebugLoader_.prototype.loaded_=function(a){for(var b=0;b<this.loadingDeps_.length;b++)if(this.loadingDeps_[b]==a){this.loadingDeps_.splice(b,1);
break}for(b=0;b<this.deferredQueue_.length;b++)if(this.deferredQueue_[b]==a.path){this.deferredQueue_.splice(b,1);break}if(this.loadingDeps_.length==this.deferredQueue_.length&&!this.depsToLoad_.length)for(;this.deferredQueue_.length;)this.requested(this.deferredQueue_.shift(),!0);a.loaded()},goog.DebugLoader_.prototype.areDepsLoaded_=function(a){for(var b=0;b<a.length;b++){var c=this.getPathFromDeps_(a[b]);if(!c||!(c in this.deferredCallbacks_||goog.isProvided_(a[b])))return!1}return!0},goog.DebugLoader_.prototype.getPathFromDeps_=
function(a){return a in this.idToPath_?this.idToPath_[a]:a in this.dependencies_?a:null},goog.DebugLoader_.prototype.defer_=function(a,b){this.deferredCallbacks_[a.path]=b;this.deferredQueue_.push(a.path)},goog.LoadController=function(){},goog.LoadController.prototype.pause=function(){},goog.LoadController.prototype.resume=function(){},goog.LoadController.prototype.loaded=function(){},goog.LoadController.prototype.pending=function(){},goog.LoadController.prototype.registerEs6ModuleExports=function(a,
b,c){},goog.LoadController.prototype.setModuleState=function(a){},goog.LoadController.prototype.clearModuleState=function(){},goog.LoadController.prototype.defer=function(a){},goog.LoadController.prototype.areDepsLoaded=function(){},goog.Dependency=function(a,b,c,f,d){this.path=a;this.relativePath=b;this.provides=c;this.requires=f;this.loadFlags=d;this.loaded_=!1;this.loadCallbacks_=[]},goog.Dependency.prototype.getPathName=function(){var a=this.path,b=a.indexOf("://");0<=b&&(a=a.substring(b+3),b=
a.indexOf("/"),0<=b&&(a=a.substring(b+1)));return a},goog.Dependency.prototype.onLoad=function(a){this.loaded_?a():this.loadCallbacks_.push(a)},goog.Dependency.prototype.loaded=function(){this.loaded_=!0;var a=this.loadCallbacks_;this.loadCallbacks_=[];for(var b=0;b<a.length;b++)a[b]()},goog.Dependency.defer_=!1,goog.Dependency.callbackMap_={},goog.Dependency.registerCallback_=function(a){var b=Math.random().toString(32);goog.Dependency.callbackMap_[b]=a;return b},goog.Dependency.unregisterCallback_=
function(a){delete goog.Dependency.callbackMap_[a]},goog.Dependency.callback_=function(a,b){if(a in goog.Dependency.callbackMap_){for(var c=goog.Dependency.callbackMap_[a],f=[],d=1;d<arguments.length;d++)f.push(arguments[d]);c.apply(void 0,f)}else throw Error("Callback key "+a+" does not exist (was base.js loaded more than once?).");},goog.Dependency.prototype.load=function(a){if(goog.global.CLOSURE_IMPORT_SCRIPT)goog.global.CLOSURE_IMPORT_SCRIPT(this.path)?a.loaded():a.pause();else if(goog.inHtmlDocument_()){var b=
goog.global.document;if("complete"==b.readyState&&!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING){if(/\bdeps.js$/.test(this.path)){a.loaded();return}throw Error('Cannot write "'+this.path+'" after document load');}if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&goog.isDocumentLoading_()){var c=goog.Dependency.registerCallback_(function(e){goog.DebugLoader_.IS_OLD_IE_&&"complete"!=e.readyState||(goog.Dependency.unregisterCallback_(c),a.loaded())}),f=!goog.DebugLoader_.IS_OLD_IE_&&goog.getScriptNonce()?
' nonce="'+goog.getScriptNonce()+'"':"";f='<script src="'+this.path+'" '+(goog.DebugLoader_.IS_OLD_IE_?"onreadystatechange":"onload")+"=\"goog.Dependency.callback_('"+c+'\', this)" type="text/javascript" '+(goog.Dependency.defer_?"defer":"")+f+">\x3c/script>";b.write(goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createHTML(f):f)}else{var d=b.createElement("script");d.defer=goog.Dependency.defer_;d.async=!1;d.type="text/javascript";(f=goog.getScriptNonce())&&d.setAttribute("nonce",f);goog.DebugLoader_.IS_OLD_IE_?
(a.pause(),d.onreadystatechange=function(){if("loaded"==d.readyState||"complete"==d.readyState)a.loaded(),a.resume()}):d.onload=function(){d.onload=null;a.loaded()};d.src=goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createScriptURL(this.path):this.path;b.head.appendChild(d)}}else goog.logToConsole_("Cannot use default debug loader outside of HTML documents."),"deps.js"==this.relativePath?(goog.logToConsole_("Consider setting CLOSURE_IMPORT_SCRIPT before loading base.js, or setting CLOSURE_NO_DEPS to true."),
a.loaded()):a.pause()},goog.Es6ModuleDependency=function(a,b,c,f,d){goog.Dependency.call(this,a,b,c,f,d)},goog.inherits(goog.Es6ModuleDependency,goog.Dependency),goog.Es6ModuleDependency.prototype.load=function(a){function b(u,n){u=n?'<script type="module" crossorigin>'+n+"\x3c/script>":'<script type="module" crossorigin src="'+u+'">\x3c/script>';f.write(goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createHTML(u):u)}function c(u,n){var m=f.createElement("script");m.defer=!0;m.async=!1;m.type=
"module";m.setAttribute("crossorigin",!0);var q=goog.getScriptNonce();q&&m.setAttribute("nonce",q);n?m.textContent=goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createScript(n):n:m.src=goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createScriptURL(u):u;f.head.appendChild(m)}if(goog.global.CLOSURE_IMPORT_SCRIPT)goog.global.CLOSURE_IMPORT_SCRIPT(this.path)?a.loaded():a.pause();else if(goog.inHtmlDocument_()){var f=goog.global.document,d=this;if(goog.isDocumentLoading_()){var e=b;goog.Dependency.defer_=
!0}else e=c;var g=goog.Dependency.registerCallback_(function(){goog.Dependency.unregisterCallback_(g);a.setModuleState(goog.ModuleType.ES6)});e(void 0,'goog.Dependency.callback_("'+g+'")');e(this.path,void 0);var l=goog.Dependency.registerCallback_(function(u){goog.Dependency.unregisterCallback_(l);a.registerEs6ModuleExports(d.path,u,goog.moduleLoaderState_.moduleName)});e(void 0,'import * as m from "'+this.path+'"; goog.Dependency.callback_("'+l+'", m)');var r=goog.Dependency.registerCallback_(function(){goog.Dependency.unregisterCallback_(r);
a.clearModuleState();a.loaded()});e(void 0,'goog.Dependency.callback_("'+r+'")')}else goog.logToConsole_("Cannot use default debug loader outside of HTML documents."),a.pause()},goog.TransformedDependency=function(a,b,c,f,d){goog.Dependency.call(this,a,b,c,f,d);this.contents_=null;this.lazyFetch_=!goog.inHtmlDocument_()||!("noModule"in goog.global.document.createElement("script"))},goog.inherits(goog.TransformedDependency,goog.Dependency),goog.TransformedDependency.prototype.load=function(a){function b(){d.contents_=
goog.loadFileSync_(d.path);d.contents_&&(d.contents_=d.transform(d.contents_),d.contents_&&(d.contents_+="\n//# sourceURL="+d.path))}function c(){d.lazyFetch_&&b();if(d.contents_){e&&a.setModuleState(goog.ModuleType.ES6);try{var n=d.contents_;d.contents_=null;goog.globalEval(n);if(e)var m=goog.moduleLoaderState_.moduleName}finally{e&&a.clearModuleState()}e&&goog.global.$jscomp.require.ensure([d.getPathName()],function(){a.registerEs6ModuleExports(d.path,goog.global.$jscomp.require(d.getPathName()),
m)});a.loaded()}}function f(){var n=goog.global.document,m=goog.Dependency.registerCallback_(function(){goog.Dependency.unregisterCallback_(m);c()}),q='<script type="text/javascript">'+goog.protectScriptTag_('goog.Dependency.callback_("'+m+'");')+"\x3c/script>";n.write(goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createHTML(q):q)}var d=this;if(goog.global.CLOSURE_IMPORT_SCRIPT)b(),this.contents_&&goog.global.CLOSURE_IMPORT_SCRIPT("",this.contents_)?(this.contents_=null,a.loaded()):a.pause();
else{var e=this.loadFlags.module==goog.ModuleType.ES6;this.lazyFetch_||b();var g=1<a.pending().length,l=g&&goog.DebugLoader_.IS_OLD_IE_;g=goog.Dependency.defer_&&(g||goog.isDocumentLoading_());if(l||g)a.defer(function(){c()});else{var r=goog.global.document;l=goog.inHtmlDocument_()&&"ActiveXObject"in goog.global;if(e&&goog.inHtmlDocument_()&&goog.isDocumentLoading_()&&!l){goog.Dependency.defer_=!0;a.pause();var u=r.onreadystatechange;r.onreadystatechange=function(){"interactive"==r.readyState&&(r.onreadystatechange=
u,c(),a.resume());goog.isFunction(u)&&u.apply(void 0,arguments)}}else!goog.DebugLoader_.IS_OLD_IE_&&goog.inHtmlDocument_()&&goog.isDocumentLoading_()?f():c()}}},goog.TransformedDependency.prototype.transform=function(a){},goog.TranspiledDependency=function(a,b,c,f,d,e){goog.TransformedDependency.call(this,a,b,c,f,d);this.transpiler=e},goog.inherits(goog.TranspiledDependency,goog.TransformedDependency),goog.TranspiledDependency.prototype.transform=function(a){return this.transpiler.transpile(a,this.getPathName())},
goog.PreTranspiledEs6ModuleDependency=function(a,b,c,f,d){goog.TransformedDependency.call(this,a,b,c,f,d)},goog.inherits(goog.PreTranspiledEs6ModuleDependency,goog.TransformedDependency),goog.PreTranspiledEs6ModuleDependency.prototype.transform=function(a){return a},goog.GoogModuleDependency=function(a,b,c,f,d,e,g){goog.TransformedDependency.call(this,a,b,c,f,d);this.needsTranspile_=e;this.transpiler_=g},goog.inherits(goog.GoogModuleDependency,goog.TransformedDependency),goog.GoogModuleDependency.prototype.transform=
function(a){this.needsTranspile_&&(a=this.transpiler_.transpile(a,this.getPathName()));return goog.LOAD_MODULE_USING_EVAL&&goog.isDef(goog.global.JSON)?"goog.loadModule("+goog.global.JSON.stringify(a+"\n//# sourceURL="+this.path+"\n")+");":'goog.loadModule(function(exports) {"use strict";'+a+"\n;return exports});\n//# sourceURL="+this.path+"\n"},goog.DebugLoader_.IS_OLD_IE_=!(goog.global.atob||!goog.global.document||!goog.global.document.all),goog.DebugLoader_.prototype.addDependency=function(a,b,
c,f){b=b||[];a=a.replace(/\\/g,"/");var d=goog.normalizePath_(goog.basePath+a);f&&"boolean"!==typeof f||(f=f?{module:goog.ModuleType.GOOG}:{});c=this.factory_.createDependency(d,a,b,c,f,goog.transpiler_.needsTranspile(f.lang||"es3",f.module));this.dependencies_[d]=c;for(c=0;c<b.length;c++)this.idToPath_[b[c]]=d;this.idToPath_[a]=d},goog.DependencyFactory=function(a){this.transpiler=a},goog.DependencyFactory.prototype.createDependency=function(a,b,c,f,d,e){return d.module==goog.ModuleType.GOOG?new goog.GoogModuleDependency(a,
b,c,f,d,e,this.transpiler):e?new goog.TranspiledDependency(a,b,c,f,d,this.transpiler):d.module==goog.ModuleType.ES6?"never"==goog.TRANSPILE&&goog.ASSUME_ES_MODULES_TRANSPILED?new goog.PreTranspiledEs6ModuleDependency(a,b,c,f,d):new goog.Es6ModuleDependency(a,b,c,f,d):new goog.Dependency(a,b,c,f,d)},goog.debugLoader_=new goog.DebugLoader_,goog.loadClosureDeps=function(){goog.debugLoader_.loadClosureDeps()},goog.setDependencyFactory=function(a){goog.debugLoader_.setDependencyFactory(a)},goog.global.CLOSURE_NO_DEPS||
goog.debugLoader_.loadClosureDeps(),goog.bootstrap=function(a,b){goog.debugLoader_.bootstrap(a,b)});goog.TRUSTED_TYPES_POLICY_NAME="";goog.identity_=function(a){return a};goog.createTrustedTypesPolicy=function(a){var b=null,c=goog.global.trustedTypes||goog.global.TrustedTypes;if(!c||!c.createPolicy)return b;try{b=c.createPolicy(a,{createHTML:goog.identity_,createScript:goog.identity_,createScriptURL:goog.identity_,createURL:goog.identity_})}catch(f){goog.logToConsole_(f.message)}return b};
goog.TRUSTED_TYPES_POLICY_=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#base"):null;var SVG_ARROW_POLYGON="0,3 12,3 12,0 18,5 12,10 12,7 0,7",SVG_ARROW_HEIGHT=10,curVisualizerID=1;
function ExecutionVisualizer(a,b,c){this.curInputCode=b.code.rtrim();this.curTrace=b.trace;this.DEFAULT_EMBEDDED_CODE_DIV_WIDTH=350;this.DEFAULT_EMBEDDED_CODE_DIV_HEIGHT=400;0<this.curTrace.length&&(b=this.curTrace[this.curTrace.length-1],"raw_input"==b.event?(this.promptForUserInput=!0,this.userInputPromptStr=htmlspecialchars(b.prompt),this.curTrace.pop()):"mouse_input"==b.event&&(this.promptForMouseInput=!0,this.userInputPromptStr=htmlspecialchars(b.prompt),this.curTrace.pop()));this.curInstr=0;
this.params=c;this.params||(this.params={});c=void 0!==this.params.arrowLines;b=void 0!==this.params.highlightLines;c||b?c&&b||(c?this.params.highlightLines=!this.params.arrowLines:this.params.arrowLines=!this.params.highlightLines):(this.params.highlightLines=!1,this.params.arrowLines=!0);this.compactFuncLabels=this.params.compactFuncLabels;this.params.pyCrazyMode&&(this.params.arrowLines=this.params.highlightLines=!1);this.params.visualizerIdOverride?this.visualizerID=this.params.visualizerIdOverride:
(this.visualizerID=curVisualizerID,curVisualizerID++);this.leftGutterSvgInitialized=!1;this.codeRowHeight=this.arrowOffsetY=void 0;this.disableHeapNesting=1==this.params.disableHeapNesting;this.drawParentPointers=1==this.params.drawParentPointers;this.textualMemoryLabels=1==this.params.textualMemoryLabels;this.showOnlyOutputs=1==this.params.showOnlyOutputs;this.tabularView=1==this.params.tabularView;this.showAllFrameLabels=1==this.params.showAllFrameLabels;this.executeCodeWithRawInputFunc=this.params.executeCodeWithRawInputFunc;
this.jsPlumbInstance=jsPlumb.getInstance({Endpoint:["Dot",{radius:3}],EndpointStyles:[{fillStyle:connectorBaseColor},{fillstyle:null}],Anchors:["RightMiddle","LeftMiddle"],PaintStyle:{lineWidth:1,strokeStyle:connectorBaseColor},Connector:["StateMachine"],Overlays:[["Arrow",{length:10,width:7,foldback:.55,location:1}]],EndpointHoverStyles:[{fillStyle:connectorHighlightColor},{fillstyle:null}],HoverPaintStyle:{lineWidth:1,strokeStyle:connectorHighlightColor}});this.domRoot=$("#"+a);this.domRoot.data("vis",
this);this.domRootD3=d3.select("#"+a);this.domRoot.html('<div class="ExecutionVisualizer"></div>');this.domRoot=this.domRoot.find("div.ExecutionVisualizer");this.domRootD3=this.domRootD3.select("div.ExecutionVisualizer");this.breakpoints=this.codeOutputLines=null;this.sortedBreakpointsList=[];this.classAttrsHidden={};this.pytutor_hooks={};"java"===this.params.lang&&this.activateJavaFrontend();this.numStdoutLines=0;var f;for(a=this.curTrace.length-1;0<=a&&!(f=this.curTrace[a].stdout);a--);f&&(this.numStdoutLines=
f.rtrim().split("\n").length);this.try_hook("end_constructor",{myViz:this});this.hasRendered=!1;this.render()}ExecutionVisualizer.prototype.add_pytutor_hook=function(a,b){this.pytutor_hooks[a]?this.pytutor_hooks[a].push(b):this.pytutor_hooks[a]=[b]};ExecutionVisualizer.prototype.try_hook=function(a,b){if(this.pytutor_hooks[a])for(var c=0;c<this.pytutor_hooks[a].length;c++){var f=this.pytutor_hooks[a][c].apply(null,[b]);if(f&&f[0])return f}return[!1]};
ExecutionVisualizer.prototype.resetJsPlumbManager=function(){this.jsPlumbManager={heap_pointer_src_id:1,connectionEndpointIDs:d3.map(),heapConnectionEndpointIDs:d3.map(),parentPointerConnectionEndpointIDs:d3.map(),renderedHeapObjectIDs:d3.map()}};ExecutionVisualizer.prototype.generateID=function(a){return"v"+this.visualizerID+"__"+a};ExecutionVisualizer.prototype.generateHeapObjID=function(a,b){return this.generateID("heap_object_"+a+"_s"+b)};
ExecutionVisualizer.prototype.render=function(){if(this.hasRendered)alert("ERROR: You should only call render() ONCE on an ExecutionVisualizer object.");else{var a=this,b='<div id="dataViz">       <table id="stackHeapTable">         <tr>           <td id="stack_td">             <div id="globals_area">               <div id="stackHeader">Frames</div>             </div>             <div id="stack"></div>           </td>           <td id="heap_td">             <div id="heap">               <div id="heapHeader">Objects</div>             </div>           </td>         </tr>       </table>     </div>';
a.tabularView&&(b='<div id="optTabularView"></div>');this.params.verticalStack?this.domRoot.html('<div id="vizHeader">       <textarea class="vizTitleText" id="vizTitleEditor" cols="60" rows="1"></textarea>       <div class="vizTitleText" id="vizTitleViewer"></div>       <textarea class="vizDescriptionText" id="vizDescriptionEditor" cols="75" rows="2"></textarea>       <div class="vizDescriptionText" id="vizDescriptionViewer"></div>    </div><table border="0" class="visualizer"><tr><td class="vizLayoutTd" id="vizLayoutTdFirst""><div id="codeDisplayDiv">       <div id="langDisplayDiv"></div>       <div id="pyCodeOutputDiv"/>       <div id="editCodeLinkDiv"><a id="editBtn">Edit code</a>       <span id="liveModeSpan" style="display: none;">| <a id="editLiveModeBtn" href="#">Live programming</a></a>       </div>       <div id="legendDiv"/>       <div id="rawUserInputDiv">       <span id="userInputPromptStr"/>       <input type="text" id="raw_input_textbox" size="30"/>       <button id="raw_input_submit_btn">Submit</button>     </div>       <div id="executionSliderDocs"><font color="#e93f34">NEW!</font> Click on a line of code to set a breakpoint. Then use the Forward and Back buttons to jump there.</div>     </div>     <div id="executionSlider"/>     <div id="executionSliderFooter"/>     <div id="vcrControls" class="btn-group">       <button id="jmpFirstInstr" class="btn-default navbar-btn" type="button"><span class="glyphicon glyphicon-backward"></span> </button>       <button id="jmpStepBack" class="btn-default navbar-btn"  type="button"><span class="glyphicon glyphicon-step-backward"></span> </button>       <span id="curInstr">Step ? of ?</span>       <button id="jmpStepFwd" class="btn-default navbar-btn"  type="button"> <span class="glyphicon glyphicon-step-forward"></span></button>       <button id="jmpLastInstr" class="btn-default navbar-btn"  type="button"> <span class="glyphicon glyphicon-forward"></span></button>     </div>     <div id="errorOutput"/>     <div id="stepAnnotationDiv">       <textarea class="annotationText" id="stepAnnotationEditor" cols="60" rows="3"></textarea>       <div class="annotationText" id="stepAnnotationViewer"></div>     </div>     <div id="annotateLinkDiv"><button id="annotateBtn" type="button">Annotate this step</button></div>     </td></tr><tr><td class="vizLayoutTd" id="vizLayoutTdSecond">'+
b+"</td></tr></table>"):this.domRoot.html('<div id="vizHeader">       <textarea class="vizTitleText" id="vizTitleEditor" cols="60" rows="1"></textarea>       <div class="vizTitleText" id="vizTitleViewer"></div>       <textarea class="vizDescriptionText" id="vizDescriptionEditor" cols="75" rows="2"></textarea>       <div class="vizDescriptionText" id="vizDescriptionViewer"></div>    </div><div id="codeDisplayDiv">       <div id="langDisplayDiv"></div>       <div id="pyCodeOutputDiv"/>       <div id="editCodeLinkDiv"><a id="editBtn">Edit code</a>       <span id="liveModeSpan" style="display: none;">| <a id="editLiveModeBtn" href="#">Live programming</a></a>       </div>       <div id="legendDiv"/>       <div id="rawUserInputDiv">       <span id="userInputPromptStr"/>       <input type="text" id="raw_input_textbox" size="30"/>       <button id="raw_input_submit_btn">Submit</button>     </div>       <div id="executionSliderDocs"><font color="#e93f34">NEW!</font> Click on a line of code to set a breakpoint. Then use the Forward and Back buttons to jump there.</div>     </div>     <div id="executionSlider"/>     <div id="executionSliderFooter"/>     <div id="vcrControls" class="btn-group">       <button id="jmpFirstInstr" class="btn-default navbar-btn" type="button"><span class="glyphicon glyphicon-backward"></span> </button>       <button id="jmpStepBack" class="btn-default navbar-btn"  type="button"><span class="glyphicon glyphicon-step-backward"></span> </button>       <span id="curInstr">Step ? of ?</span>       <button id="jmpStepFwd" class="btn-default navbar-btn"  type="button"> <span class="glyphicon glyphicon-step-forward"></span></button>       <button id="jmpLastInstr" class="btn-default navbar-btn"  type="button"> <span class="glyphicon glyphicon-forward"></span></button>     </div>     <div id="errorOutput"/>     <div id="stepAnnotationDiv">       <textarea class="annotationText" id="stepAnnotationEditor" cols="60" rows="3"></textarea>       <div class="annotationText" id="stepAnnotationViewer"></div>     </div>     <div id="annotateLinkDiv"><button id="annotateBtn" type="button">Annotate this step</button></div>     '+
b);this.showOnlyOutputs?(a.domRoot.find("#dataViz").hide(),this.domRoot.find("#vizLayoutTdSecond").append('<div id="htmlOutputDiv"></div>     <div id="progOutputs">       <div id="printOutputDocs">Print output (drag lower right corner to resize)</div>\n       <textarea id="pyStdout" cols="40" rows="5" wrap="off" readonly></textarea>     </div>'),this.params.verticalStack?this.domRoot.find("#vizLayoutTdSecond").css("padding-top","25px"):this.domRoot.find("#vizLayoutTdSecond").css("padding-left","25px")):
(b="75px",3>=this.numStdoutLines&&(b=18*this.numStdoutLines+"px"),this.params.embeddedMode&&(b="45px"),this.domRoot.find("#vizLayoutTdSecond").prepend('<div id="htmlOutputDiv"></div>     <div id="progOutputs">       <div id="printOutputDocs">Print output (drag lower right corner to resize)</div>\n       <textarea id="pyStdout" cols="40" rows="5" wrap="off" readonly></textarea>     </div>'),this.domRoot.find("#pyStdout").width("350px").height(b).resizable());this.params.arrowLines?(this.domRoot.find("#legendDiv").append('<svg id="prevLegendArrowSVG"/> line that has just executed').append('<p style="margin-top: 4px"><svg id="curLegendArrowSVG"/> next line to execute</p>'),
a.domRootD3.select("svg#prevLegendArrowSVG").append("polygon").attr("points",SVG_ARROW_POLYGON).attr("fill",lightArrowColor),a.domRootD3.select("svg#curLegendArrowSVG").append("polygon").attr("points",SVG_ARROW_POLYGON).attr("fill",darkArrowColor)):this.params.highlightLines?a.domRoot.find("#legendDiv").append('<span class="highlight-legend highlight-prev">line that has just executed</span> ').append('<span class="highlight-legend highlight-cur">next line to execute</span>'):this.params.pyCrazyMode&&
a.domRoot.find("#legendDiv").append('<a href="https://github.com/pgbovine/Py2crazy">Py2crazy</a> mode!').append(" Stepping through (roughly) each executed expression. Color codes:<p/>").append('<span class="pycrazy-highlight-prev">expression that just executed</span><br/>').append('<span class="pycrazy-highlight-cur">next expression to execute</span>');this.params.editCodeBaseURL?(b="2","js"===this.params.lang?b="js":"ts"===this.params.lang?b="ts":"java"===this.params.lang?b="java":"py3"===this.params.lang?
b="3":"c"===this.params.lang?b="c":"cpp"===this.params.lang&&(b="cpp"),b=$.param.fragment(this.params.editCodeBaseURL,{code:this.curInputCode,py:b},2),this.domRoot.find("#editBtn").attr("href",b)):(this.domRoot.find("#editCodeLinkDiv").hide(),this.domRoot.find("#editBtn").attr("href","#"),this.domRoot.find("#editBtn").click(function(){return!1}));void 0!==this.params.lang&&("js"===this.params.lang?this.domRoot.find("#langDisplayDiv").html("JavaScript"):"ts"===this.params.lang?this.domRoot.find("#langDisplayDiv").html("TypeScript"):
"ruby"===this.params.lang?this.domRoot.find("#langDisplayDiv").html("Ruby"):"java"===this.params.lang?this.domRoot.find("#langDisplayDiv").html("Java"):"py2"===this.params.lang?this.domRoot.find("#langDisplayDiv").html("Python 2.7"):"py3"===this.params.lang?this.domRoot.find("#langDisplayDiv").html("Python 3.3"):"c"===this.params.lang?this.domRoot.find("#langDisplayDiv").html('C (gcc 4.8, C11) <font color="#e93f34">EXPERIMENTAL!</font><br/>see <a href="https://github.com/pgbovine/opt-cpp-backend/issues" target="_blank">known bugs</a> and report to philip@pgbovine.net'):
"cpp"===this.params.lang?this.domRoot.find("#langDisplayDiv").html('C++ (gcc 4.8, C++11) <font color="#e93f34">EXPERIMENTAL!</font><br/>see <a href="https://github.com/pgbovine/opt-cpp-backend/issues" target="_blank">known bugs</a> and report to philip@pgbovine.net'):this.domRoot.find("#langDisplayDiv").hide());this.allowEditAnnotations=void 0!==this.params.allowEditAnnotations?this.params.allowEditAnnotations:!1;this.pyCrazyMode=void 0!==this.params.pyCrazyMode?this.params.pyCrazyMode:!1;this.domRoot.find("#stepAnnotationEditor").hide();
this.params.embeddedMode&&(this.embeddedMode=!0,void 0===this.params.codeDivWidth&&(this.params.codeDivWidth=this.DEFAULT_EMBEDDED_CODE_DIV_WIDTH),void 0===this.params.codeDivHeight&&(this.params.codeDivHeight=this.DEFAULT_EMBEDDED_CODE_DIV_HEIGHT),this.allowEditAnnotations=!1,this.domRoot.find("#codeDisplayDiv").append('<div style="font-size: 8pt; margin-bottom: 20px;">Visualized using <a href="http://pythontutor.com" target="_blank" style="color: #3D58A2;">Online Python Tutor</a> by <a href="http://www.pgbovine.net/" target="_blank" style="color: #3D58A2;">Philip Guo</a></div>'),
a.domRoot.find("#executionSliderDocs").hide());a.editAnnotationMode=!1;if(this.allowEditAnnotations){var c=this.domRoot.find("#annotateBtn");c.click(function(){a.editAnnotationMode?(a.enterViewAnnotationsMode(),a.domRoot.find("#jmpFirstInstr,#jmpLastInstr,#jmpStepBack,#jmpStepFwd,#executionSlider,#editCodeLinkDiv,#stepAnnotationViewer").show(),a.domRoot.find("#stepAnnotationEditor").hide(),c.html("Annotate this step")):(a.enterEditAnnotationsMode(),a.domRoot.find("#jmpFirstInstr,#jmpLastInstr,#jmpStepBack,#jmpStepFwd,#executionSlider,#editCodeLinkDiv,#stepAnnotationViewer").hide(),
a.domRoot.find("#stepAnnotationEditor").show(),c.html("Done annotating"))})}else this.domRoot.find("#annotateBtn").hide();this.params.codeDivWidth&&470>this.params.codeDivWidth&&(this.domRoot.find("#jmpFirstInstr").hide(),this.domRoot.find("#jmpLastInstr").hide());this.params.codeDivWidth&&this.domRoot.find("#codeDisplayDiv").width(this.params.codeDivWidth);this.domRoot.find("#codeDisplayDiv").resizable({handles:"e",minWidth:100,resize:function(g,l){a.domRoot.find("#codeDisplayDiv").css("height",
"auto");a.renderSliderBreakpoints();a.params.updateOutputCallback&&a.params.updateOutputCallback(this)}});this.params.codeDivHeight&&this.domRoot.find("#pyCodeOutputDiv").css("max-height",this.params.codeDivHeight+"px");this.domRoot.find("#globals_area").append('<div class="stackFrame" id="'+a.generateID("globals")+'"><div id="'+a.generateID("globals_header")+'" class="stackFrameHeader">'+this.getRealLabel("Global frame")+'</div><table class="stackFrameVarTable" id="'+a.generateID("global_table")+
'"></table></div>');this.params.hideOutput&&this.domRoot.find("#progOutputs").hide();this.domRoot.find("#jmpFirstInstr").click(function(){a.renderStep(0)});this.domRoot.find("#jmpLastInstr").click(function(){a.renderStep(a.curTrace.length-1)});this.domRoot.find("#jmpStepBack").click(function(){a.stepBack()});this.domRoot.find("#jmpStepFwd").click(function(){a.stepForward()});this.domRoot.find("#vcrControls #jmpFirstInstr").attr("disabled",!0);this.domRoot.find("#vcrControls #jmpStepBack").attr("disabled",
!0);this.domRoot.find("#vcrControls #jmpStepFwd").attr("disabled",!0);this.domRoot.find("#vcrControls #jmpLastInstr").attr("disabled",!0);b=this.curTrace[this.curTrace.length-1];if(this.instrLimitReached="instruction_limit_reached"==b.event)this.curTrace.pop(),this.instrLimitReachedWarningMsg=b=b.exception_msg,a.domRoot.find("#errorOutput").html(htmlspecialchars(b)),a.domRoot.find("#errorOutput").show();b=this.domRoot.find("#executionSlider");b.slider({min:0,max:this.curTrace.length-1,step:1});b.find(".ui-slider-handle").unbind("keydown");
b.find(".ui-slider-handle").css("width","0.8em");b.find(".ui-slider-handle").css("height","1.4em");this.domRoot.find(".ui-widget-content").css("font-size","0.9em");this.domRoot.find("#executionSlider").bind("slide",function(g,l){g.originalEvent&&a.renderStep(l.value)});this.params.startingInstruction&&(this.params.jumpToEnd=!1,this.params.startingInstruction==this.curTrace.length&&this.params.startingInstruction--,0>this.params.startingInstruction&&(this.params.startingInstruction=0),this.params.startingInstruction>=
this.curTrace.length&&(this.params.startingInstruction=this.curTrace.length-1),assert(0<=this.params.startingInstruction&&this.params.startingInstruction<this.curTrace.length),this.curInstr=this.params.startingInstruction);if(this.params.jumpToEnd){b=-1;for(var f=0;f<this.curTrace.length;f++){var d=this.curTrace[f];if("exception"==d.event||"uncaught_exception"==d.event){b=f;break}}this.curInstr=0<=b?b:this.curTrace.length-1}this.params.hideCode&&this.domRoot.find("#codeDisplayDiv").hide();this.try_hook("end_render",
{myViz:this});this.precomputeCurTraceLayouts();this.params.hideCode||this.renderPyCodeOutput();this.tabularView&&(this.renderTabularView(),$(window).scroll(function(){var g=a.domRoot.find("#vizLayoutTdFirst"),l=$(document).scrollTop(),r=g.offset().top;l-=r;0>l&&(l=0);var u=a.domRoot.find("#optTabularView");u=u.height()+u.offset().top;var n=a.domRoot.find("#codeDisplayDiv").height();l-r<u-n&&g.css("padding-top",l)}));var e=a.domRoot.find("#rawUserInputDiv");e.find("#userInputPromptStr").html(a.userInputPromptStr);
e.find("#raw_input_submit_btn").click(function(){var g=e.find("#raw_input_textbox").val();a.executeCodeWithRawInputFunc(g,a.curInstr+1)});this.updateOutput();this.hasRendered=!0}};
ExecutionVisualizer.prototype.showVizHeaderViewMode=function(){var a=this.domRoot.find("#vizTitleEditor").val().trim(),b=this.domRoot.find("#vizDescriptionEditor").val().trim();this.domRoot.find("#vizTitleEditor,#vizDescriptionEditor").hide();a||b?(this.domRoot.find("#vizHeader,#vizTitleViewer,#vizDescriptionViewer").show(),a&&this.domRoot.find("#vizTitleViewer").html(htmlsanitize(a)),b&&this.domRoot.find("#vizDescriptionViewer").html(htmlsanitize(b))):this.domRoot.find("#vizHeader").hide()};
ExecutionVisualizer.prototype.showVizHeaderEditMode=function(){this.domRoot.find("#vizHeader").show();this.domRoot.find("#vizTitleViewer,#vizDescriptionViewer").hide();this.domRoot.find("#vizTitleEditor,#vizDescriptionEditor").show()};ExecutionVisualizer.prototype.destroyAllAnnotationBubbles=function(){this.allAnnotationBubbles&&$.each(this.allAnnotationBubbles,function(a,b){b.destroyQTip()});this.domRoot.find("#pyCodeOutputDiv").unbind("scroll");this.allAnnotationBubbles=null};
ExecutionVisualizer.prototype.initStepAnnotation=function(){var a=this.curTrace[this.curInstr];a.stepAnnotation?(this.domRoot.find("#stepAnnotationViewer").html(htmlsanitize(a.stepAnnotation)),this.domRoot.find("#stepAnnotationEditor").val(a.stepAnnotation)):(this.domRoot.find("#stepAnnotationViewer").html(""),this.domRoot.find("#stepAnnotationEditor").val(""))};
ExecutionVisualizer.prototype.initAllAnnotationBubbles=function(){var a=this;a.destroyAllAnnotationBubbles();var b=[];$.each(this.domRoot.find("#pyCodeOutput .cod"),function(e,g){b.push($(g).attr("id"))});var c=[];$.each(this.domRoot.find(".heapObject"),function(e,g){c.push($(g).attr("id"))});var f=[];$.each(this.domRoot.find(".variableTr"),function(e,g){f.push($(g).attr("id"))});var d=[];$.each(this.domRoot.find(".stackFrame"),function(e,g){d.push($(g).attr("id"))});a.allAnnotationBubbles=[];$.each(b,
function(e,g){a.allAnnotationBubbles.push(new AnnotationBubble(a,"codeline",g))});$.each(c,function(e,g){a.allAnnotationBubbles.push(new AnnotationBubble(a,"object",g))});$.each(f,function(e,g){a.allAnnotationBubbles.push(new AnnotationBubble(a,"variable",g))});$.each(d,function(e,g){a.allAnnotationBubbles.push(new AnnotationBubble(a,"frame",g))});this.domRoot.find("#pyCodeOutputDiv").scroll(function(){$.each(a.allAnnotationBubbles,function(e,g){"codeline"==g.type&&g.redrawCodelineBubble()})})};
ExecutionVisualizer.prototype.enterViewAnnotationsMode=function(){this.editAnnotationMode=!1;var a=this.curTrace[this.curInstr];!this.allAnnotationBubbles&&a.bubbleAnnotations&&(this.initAllAnnotationBubbles(),$.each(this.allAnnotationBubbles,function(f,d){(f=a.bubbleAnnotations[d.domID])&&d.preseedText(f)}));if(this.allAnnotationBubbles){var b={};$.each(this.allAnnotationBubbles,function(f,d){d.enterViewMode();d.text&&(b[d.domID]=d.text)});a.bubbleAnnotations=b}var c=this.domRoot.find("#stepAnnotationEditor").val().trim();
c?a.stepAnnotation=c:delete a.stepAnnotation;this.initStepAnnotation();this.showVizHeaderViewMode();this.redrawConnectors();this.redrawAllAnnotationBubbles()};
ExecutionVisualizer.prototype.enterEditAnnotationsMode=function(){this.editAnnotationMode=!0;var a=this.curTrace[this.curInstr];this.allAnnotationBubbles||this.initAllAnnotationBubbles();$.each(this.allAnnotationBubbles,function(b,c){c.enterEditMode()});a.stepAnnotation?this.domRoot.find("#stepAnnotationEditor").val(a.stepAnnotation):this.domRoot.find("#stepAnnotationEditor").val("");this.showVizHeaderEditMode();this.redrawConnectors();this.redrawAllAnnotationBubbles()};
ExecutionVisualizer.prototype.redrawAllAnnotationBubbles=function(){this.allAnnotationBubbles&&$.each(this.allAnnotationBubbles,function(a,b){b.redrawBubble()})};
ExecutionVisualizer.prototype.findPrevBreakpoint=function(){var a=this.curInstr;if(0==this.sortedBreakpointsList.length)return-1;for(var b=1;b<this.sortedBreakpointsList.length;b++){var c=this.sortedBreakpointsList[b-1];if(a<=c)return-1;if(this.sortedBreakpointsList[b]>=a)return c}b=this.sortedBreakpointsList[this.sortedBreakpointsList.length-1];return b<a?b:-1};
ExecutionVisualizer.prototype.findNextBreakpoint=function(){var a=this.curInstr;if(0==this.sortedBreakpointsList.length)return-1;if(0<=$.inArray(a,this.sortedBreakpointsList))return a+1;for(var b=0;b<this.sortedBreakpointsList.length-1;b++){var c=this.sortedBreakpointsList[b],f=this.sortedBreakpointsList[b+1];if(a<c)return c;if(c<=a&&a<f)return f}b=this.sortedBreakpointsList[this.sortedBreakpointsList.length-1];return b>a?b:-1};
ExecutionVisualizer.prototype.stepForward=function(){if(!this.editAnnotationMode){if(this.curInstr<this.curTrace.length-1){if(0<this.sortedBreakpointsList.length){var a=this.findNextBreakpoint();this.curInstr=-1!=a?a:this.curInstr+1}else this.curInstr+=1;this.updateOutput(!0);return!0}return!1}};
ExecutionVisualizer.prototype.stepBack=function(){if(!this.editAnnotationMode){if(0<this.curInstr){if(0<this.sortedBreakpointsList.length){var a=this.findPrevBreakpoint();-1!=a?this.curInstr=a:--this.curInstr}else--this.curInstr;this.updateOutput();return!0}return!1}};
ExecutionVisualizer.prototype.renderSliderBreakpoints=function(){this.domRoot.find("#executionSliderFooter").empty();var a=this.domRoot.find("#executionSlider").width(),b=this.domRootD3.select("#executionSliderFooter").append("svg").attr("id","sliderOverlay").attr("width",a).attr("height",12),c=d3.scale.linear().domain([0,this.curTrace.length-1]).range([0,a]);b.selectAll("rect").data(this.sortedBreakpointsList).enter().append("rect").attr("x",function(f,d){return 0===f?0:c(f)-1}).attr("y",0).attr("width",
2).attr("height",12).style("fill",function(f){return breakpointColor})};
ExecutionVisualizer.prototype.renderPyCodeOutput=function(){function a(){var n=[];f.breakpoints.forEach(function(m,q){n.push(Number(m))});n.sort(function(m,q){return m-q});return n}function b(n){$.each(n,function(m,q){f.breakpoints.set(q,1)});f.sortedBreakpointsList=a()}function c(n){$.each(n,function(m,q){f.breakpoints.remove(q)});f.sortedBreakpointsList=a()}var f=this;this.breakpoints=d3.map();this.sortedBreakpointsList=[];this.codeOutputLines=[];for(var d=this.curInputCode.split("\n"),e=0;e<d.length;e++){var g=
d[e],l={};l.text=g;l.lineNumber=e+1;l.executionPoints=[];l.breakpointHere=!1;$.each(this.curTrace,function(n,m){m.line==l.lineNumber&&l.executionPoints.push(n)});var r=!1;g=g.split("#");for(var u=1;u<g.length;u++)-1!=g[u].indexOf("breakpoint")&&(r=!0);r&&0<l.executionPoints.length&&(l.breakpointHere=!0,b(l.executionPoints));this.codeOutputLines.push(l)}f.domRoot.find("#pyCodeOutputDiv").empty();d=this.domRootD3.select("#pyCodeOutputDiv").append("table").attr("id","pyCodeOutput").selectAll("tr").data(this.codeOutputLines).enter().append("tr").selectAll("td").data(function(n,
m){return[n,n]}).enter().append("td").attr("class",function(n,m){return 0==m?"lineNo":"cod"}).attr("id",function(n,m){return 0==m?"lineNo"+n.lineNumber:f.generateID("cod"+n.lineNumber)}).html(function(n,m){return 0==m?n.lineNumber:htmlspecialchars(n.text)});f.params.arrowLines&&(f.domRoot.find("#pyCodeOutput tr:first").prepend('<td id="gutterTD" valign="top" rowspan="'+this.codeOutputLines.length+'"><svg id="leftCodeGutterSVG"/></td>'),f.domRootD3.select("svg#leftCodeGutterSVG").append("polygon").attr("id",
"prevLineArrow").attr("points",SVG_ARROW_POLYGON).attr("fill",lightArrowColor),f.domRootD3.select("svg#leftCodeGutterSVG").append("polygon").attr("id","curLineArrow").attr("points",SVG_ARROW_POLYGON).attr("fill",darkArrowColor));d.style("cursor",function(n,m){if((n=n.executionPoints)&&0!=n.length)return"pointer"}).on("click",function(n,m){(m=n.executionPoints)&&0!=m.length&&(n.breakpointHere=!n.breakpointHere,n.breakpointHere?(b(n.executionPoints),d3.select(this.parentNode).select("td.lineNo").style("color",
breakpointColor),d3.select(this.parentNode).select("td.lineNo").style("font-weight","bold"),d3.select(this.parentNode).select("td.cod").style("color",breakpointColor)):(c(n.executionPoints),d3.select(this.parentNode).select("td.lineNo").style("color",""),d3.select(this.parentNode).select("td.lineNo").style("font-weight",""),d3.select(this.parentNode).select("td.cod").style("color","")),f.renderSliderBreakpoints())})};
function htmlWithHighlight(a,b,c,f){var d="";0<b&&(d=a.slice(0,b));var e=a.slice(b,b+c),g="";b+c<a.length&&(g=a.slice(b+c,a.length));return htmlspecialchars(d)+'<span class="'+f+'">'+htmlspecialchars(e)+"</span>"+htmlspecialchars(g)}
ExecutionVisualizer.prototype.renderStdout=function(){var a=this.curTrace[this.curInstr];if(!this.params.hideOutput&&0<this.numStdoutLines){this.domRoot.find("#progOutputs").show();var b=this.domRoot.find("#pyStdout"),c=b.scrollLeft();b.val(a.stdout.rtrim());b.scrollLeft(c);b.scrollTop(b[0].scrollHeight)}else this.domRoot.find("#progOutputs").hide()};
ExecutionVisualizer.prototype.updateCurPrevLines=function(){var a=this.curInstr===this.curTrace.length-1;a=!this.instrLimitReached&&a;var b=null;var c=this.curTrace[this.curInstr];var f=!1,d="return"==c.event,e=!1;if(0<this.curInstr&&(b=this.curTrace[this.curInstr-1].line,e="return"==this.curTrace[this.curInstr-1].event)){var g=this.curInstr-1,l=this.curTrace[g].stack_to_render;assert(0<l.length);for(l=l[l.length-1].frame_id;0<=g;){var r=this.curTrace[g];if("call"==r.event&&r.stack_to_render&&r.stack_to_render[r.stack_to_render.length-
1].frame_id==l)break;g--}0<g&&(b=this.curTrace[g-1].line,e=!1)}if("exception"==c.event||"uncaught_exception"==c.event)assert(c.exception_msg),f=!0,this.curLineExceptionMsg=c.exception_msg;c=c.line;a&&!f&&b==c&&(c=null);this.curLineNumber=c;this.prevLineNumber=b;this.curLineIsReturn=d;this.prevLineIsReturn=e};ExecutionVisualizer.prototype.updateOutput=function(a){this.params.hideCode?this.updateOutputMini():this.updateOutputFull(a);this.renderStdout();this.try_hook("end_updateOutput",{myViz:this})};
ExecutionVisualizer.prototype.updateOutputFull=function(a){function b(){function n(y){y=c.domRoot.find("#lineNo"+y).offset().top;var D=q.offset().top,F=q.scrollTop(),K=q.height();q.stop();q.animate({scrollTop:F+(y-D-Math.round(K/2))},300)}var m=!c.instrLimitReached&&u,q=c.domRoot.find("#pyCodeOutputDiv"),p=null,t=null,h=void 0,k=void 0,w="return"==l.event,v=!1;if(0<c.curInstr){t=c.curTrace[c.curInstr-1].line;if(v="return"==c.curTrace[c.curInstr-1].event){p=c.curInstr-1;var x=c.curTrace[p].stack_to_render;
assert(0<x.length);for(x=x[x.length-1].frame_id;0<=p;){var A=c.curTrace[p];if("call"==A.event&&A.stack_to_render&&A.stack_to_render[A.stack_to_render.length-1].frame_id==x)break;p--}0<p&&(t=c.curTrace[p-1].line,a=v=!1)}c.pyCrazyMode&&(p=c.curTrace[c.curInstr-1],h=void 0!==p.expr_start_col?p.expr_start_col:p.column,k=void 0!==p.expr_width?p.expr_width:1)}p=l.line;if(c.pyCrazyMode){x=l.column;x=void 0!==l.expr_start_col?l.expr_start_col:x;A=void 0!==l.expr_width?l.expr_width:1;var C=c.codeOutputLines[p-
1];assert(C.lineNumber==p);C=C.text;$.each(c.codeOutputLines,function(y,D){y=c.generateID("cod"+D.lineNumber);c.domRoot.find("#"+y).html(htmlspecialchars(D.text))});if(t==p){for(var z="",B=0;B<C.length;B++){var G=x<=B&&B<x+A,I=h<=B&&B<h+k,E=htmlspecialchars(C[B]);z=G&&I?z+('<span class="pycrazy-highlight-prev-and-cur">'+E+"</span>"):I?z+('<span class="pycrazy-highlight-prev">'+E+"</span>"):G?z+('<span class="pycrazy-highlight-cur">'+E+"</span>"):z+E}assert(z)}else t&&(h=htmlWithHighlight(c.codeOutputLines[t-
1].text,h,k,"pycrazy-highlight-prev"),c.domRoot.find("#"+c.generateID("cod"+t)).html(h)),z=htmlWithHighlight(C,x,A,"pycrazy-highlight-cur");c.domRoot.find("#"+c.generateID("cod"+p)).html(z)}k=v?Math.floor(c.codeRowHeight/3):0;h=w?Math.floor(c.codeRowHeight/3):0;m&&!r&&(t==p?p=null:h-=2);if(c.params.arrowLines){if(t){var H=c.domRootD3.select("#prevLineArrow"),J="translate(0, "+((t-1)*c.codeRowHeight+c.arrowOffsetY+k)+")";a?H.transition().duration(200).attr("fill","white").each("end",function(){H.attr("transform",
J).attr("fill",lightArrowColor);d.find("#prevLineArrow").show()}):(H.attr("transform",J),d.find("#prevLineArrow").show())}else d.find("#prevLineArrow").hide();p?(m=c.domRootD3.select("#curLineArrow"),h="translate(0, "+((p-1)*c.codeRowHeight+c.arrowOffsetY+h)+")",a?m.transition().delay(200).duration(250).attr("transform",h):m.attr("transform",h),d.find("#curLineArrow").show()):d.find("#curLineArrow").hide()}c.domRootD3.selectAll("#pyCodeOutputDiv td.cod").style("border-top",function(y){return r&&y.lineNumber==
l.line?"1px solid "+errorColor:""}).style("border-bottom",function(y){return r&&y.lineNumber==l.line?"1px solid "+errorColor:""});c.params.highlightLines&&(c.domRoot.find("#pyCodeOutputDiv td.cod").removeClass("highlight-prev"),c.domRoot.find("#pyCodeOutputDiv td.cod").removeClass("highlight-cur"),p&&c.domRoot.find("#"+c.generateID("cod"+p)).addClass("highlight-cur"),t&&c.domRoot.find("#"+c.generateID("cod"+t)).addClass("highlight-prev"));(function(y){y=c.domRoot.find("#lineNo"+y).offset().top;var D=
q.offset().top;q.scrollTop();var F=q.height();return D<=y&&y<D+F-30})(l.line)||n(l.line);c.curLineNumber=p;c.prevLineNumber=t;c.curLineIsReturn=w;c.prevLineIsReturn=v}assert(this.curTrace);assert(!this.params.hideCode);var c=this;if(c.domRoot.is(":visible")){c.curLineNumber=void 0;c.prevLineNumber=void 0;c.curLineIsReturn=void 0;c.prevLineIsReturn=void 0;c.curLineExceptionMsg=void 0;c.codeHorizontalOverflow=c.domRoot.find("#pyCodeOutput").width()-c.domRoot.find("#pyCodeOutputDiv").width();0>c.codeHorizontalOverflow&&
(c.codeHorizontalOverflow=0);var f=c.domRoot.find("#dataViz").height(),d=c.domRoot.find("svg#leftCodeGutterSVG");if(!c.leftGutterSvgInitialized&&c.params.arrowLines){d.height(d.parent().height());var e=c.domRoot.find("table#pyCodeOutput tr:first").offset().top;c.codeRowHeight=c.domRoot.find("table#pyCodeOutput td.cod:first").height();if(this.codeOutputLines&&1<this.codeOutputLines.length){var g=c.domRoot.find("table#pyCodeOutput tr:nth-child(2)").offset().top;c.codeRowHeight=g-e}assert(0<c.codeRowHeight);
g=d.offset().top;c.arrowOffsetY=Math.floor(c.codeRowHeight/2-SVG_ARROW_HEIGHT/2)-(g-e);c.leftGutterSvgInitialized=!0}c.params.arrowLines&&(assert(void 0!==c.arrowOffsetY),assert(void 0!==c.codeRowHeight),assert(0<=c.arrowOffsetY&&c.arrowOffsetY<=c.codeRowHeight));this.params.updateOutputCallback&&this.params.updateOutputCallback(this);var l=this.curTrace[this.curInstr],r=!1;l.question&&$("#"+l.question.div).modal({position:["25%","50%"]});c.params.debugMode&&(console.log("updateOutputFull",l),c.debugMode=
!0);var u=c.curInstr==c.curTrace.length-1;c.updateVCRControls();"exception"==l.event||"uncaught_exception"==l.event?(assert(l.exception_msg),"Unknown error"==l.exception_msg?c.domRoot.find("#errorOutput").html("Unknown error: Please email a bug report to philip@pgbovine.net"):c.domRoot.find("#errorOutput").html(htmlspecialchars(l.exception_msg)),c.domRoot.find("#errorOutput").show(),r=!0,c.curLineExceptionMsg=l.exception_msg):this.instrLimitReached||c.domRoot.find("#errorOutput").hide();l.line&&b();
c.domRoot.find("#htmlOutputDiv").empty();l.html_output&&(l.css_output&&c.domRoot.find("#htmlOutputDiv").append('<style type="text/css">'+l.css_output+"</style>"),c.domRoot.find("#htmlOutputDiv").append(l.html_output),l.js_output&&c.domRoot.find("#htmlOutputDiv").append('<script type="text/javascript">'+l.js_output+"\x3c/script>"));l=this.curTrace[this.curInstr];this.renderDataStructures(l,this.curTraceLayouts[this.curInstr]);this.enterViewAnnotationsMode();c.domRoot.find("#dataViz").height()!=f&&
this.params.heightChangeCallback&&this.params.heightChangeCallback(this);f=c.domRoot.find("#rawUserInputDiv");f.hide();u&&c.executeCodeWithRawInputFunc&&c.promptForUserInput&&f.show()}};
ExecutionVisualizer.prototype.updateOutputMini=function(){assert(this.params.hideCode);var a=this.curTrace[this.curInstr],b=this.curTraceLayouts[this.curInstr];this.debugMode=this.params.debugMode;this.showAddr=this.params.showAddr;this.renderDataStructures(a,b);Blockly.mainWorkspace.traceOn(!0);Blockly.mainWorkspace.highlightBlock(a.bid);this.enterViewAnnotationsMode();this.updateVCRControls()};
ExecutionVisualizer.prototype.updateVCRControls=function(){var a=this.curTrace.length,b=this.curInstr==a-1,c=this.domRoot.find("#vcrControls");b?this.promptForUserInput||this.promptForMouseInput?c.find("#curInstr").html('<b><font color="'+brightRed+'">Enter user input below:</font></b>'):this.instrLimitReached?c.find("#curInstr").html("Instruction limit reached"):c.find("#curInstr").html("Program terminated"):c.find("#curInstr").html("Step "+String(this.curInstr+1)+" of "+String(a-1));c.find("#jmpFirstInstr").attr("disabled",
!1);c.find("#jmpStepBack").attr("disabled",!1);c.find("#jmpStepFwd").attr("disabled",!1);c.find("#jmpLastInstr").attr("disabled",!1);0==this.curInstr&&(c.find("#jmpFirstInstr").attr("disabled",!0),c.find("#jmpStepBack").attr("disabled",!0));b&&(c.find("#jmpLastInstr").attr("disabled",!0),c.find("#jmpStepFwd").attr("disabled",!0));this.domRoot.find("#executionSlider").slider("value",this.curInstr)};
ExecutionVisualizer.prototype.renderStep=function(a){assert(0<=a);assert(a<this.curTrace.length);this.curInstr!=a&&(this.curInstr=a,this.updateOutput())};ExecutionVisualizer.prototype.isCppMode=function(){return"c"===this.params.lang||"cpp"===this.params.lang};
ExecutionVisualizer.prototype.precomputeCurTraceLayouts=function(){this.curTraceLayouts=[];this.curTraceLayouts.push([]);var a=this;assert(0<this.curTrace.length);$.each(this.curTrace,function(b,c){function f(m){var q=a.try_hook("isLinearObj",{heapObj:m});return q[0]?q[1]:"LIST"==m[0]||"TUPLE"==m[0]||"SET"==m[0]}function d(m,q,p){var t=c.heap[m];if(a.isCppMode()){if(!t)return}else assert(t);f(t)?$.each(t,function(h,k){1>h||a.isPrimitiveType(k)||(h=getRefID(k),a.disableHeapNesting?e(h,[],[]):e(h,q,
p))}):"DICT"==t[0]?$.each(t,function(h,k){1>h||(a.disableHeapNesting&&(h=k[0],a.isPrimitiveType(h)||(h=getRefID(h),e(h,[],[]))),k=k[1],a.isPrimitiveType(k)||(k=getRefID(k),a.structurallyEquivalent(t,c.heap[k])?e(k,q,p):a.disableHeapNesting&&e(k,[],[])))}):"INSTANCE"==t[0]||"CLASS"==t[0]?jQuery.each(t,function(h,k){h<("INSTANCE"==t[0]?2:3)||(a.disableHeapNesting&&(h=k[0],a.isPrimitiveType(h)||(h=getRefID(h),e(h,[],[]))),k=k[1],a.isPrimitiveType(k)||(k=getRefID(k),a.structurallyEquivalent(t,c.heap[k])?
e(k,q,p):a.disableHeapNesting&&e(k,[],[])))}):("C_ARRAY"==t[0]||"C_STRUCT"==t[0])&&g(t)}function e(m,q,p){if(!n.has(m)){a:{for(var t=0;t<r.length;t++){var h=r[t];var k=h.indexOf(m);if(0<k){h={row:h,index:k};break a}}h=null}t=n.has(m);n.set(m,1);if(h){q=h.row;h=h.index;u.remove(m);if(!t&&1<p.length){h=[h,0];for(t=1;t<p.length;t++)h.push(p[t]),u.remove(p[t]);q.splice.apply(q,h);p.splice(0,p.length)}d(m,q,[])}else if(0==p.length&&p.push("row"+m),p.push(m),d(m,q,p),0<p.length){if(q&&0<q.length)for(t=
1;t<p.length;t++)q.push(p[t]);else r.push($.extend(!0,[],p));for(t=1;t<p.length;t++)u.remove(p[t]);p.splice(0,p.length)}}}function g(m){if(m){if(isHeapRef(m,c.heap)){var q=getRefID(m);e(q,null,[])}l(m)}}function l(m){"C_ARRAY"===m[0]?$.each(m,function(q,p){2>q||g(p)}):"C_STRUCT"===m[0]&&$.each(m,function(q,p){3>q||g(p[1])})}var r=$.extend(!0,[],a.curTraceLayouts[a.curTraceLayouts.length-1]),u=d3.map();$.each(r,function(m,q){for(m=1;m<q.length;m++)u.set(q[m],1)});var n=d3.map();$.each(c.ordered_globals,
function(m,q){m=c.globals[q];void 0!==m&&(a.isCppMode()?g(m):a.isPrimitiveType(m)||(m=getRefID(m),e(m,null,[])))});$.each(c.stack_to_render,function(m,q){$.each(q.ordered_varnames,function(p,t){a.isCppMode()?g(t):a.isPrimitiveType(t)||(p=getRefID(t),e(p,null,[]))})});u.forEach(function(m,q){m=Number(m);$.each(r,function(p,t){p=t.indexOf(m);0<p&&t.splice(p,1)})});r=r.filter(function(m){return 1<m.length});a.curTraceLayouts.push(r)});this.curTraceLayouts.splice(0,1);assert(this.curTrace.length==this.curTraceLayouts.length)};
var heapPtrSrcRE=/__heap_pointer_src_/,rightwardNudgeHack=!0;
ExecutionVisualizer.prototype.renderDataStructures=function(a,b){function c(h,k){e.isCppMode()?e.domRoot.find("#"+k).length?e.jsPlumbInstance.connect({source:h,target:k,curviness:300,anchors:["RightMiddle","RightMiddle"],scope:"varValuePointer"}):e.domRoot.find("#"+h).html("\ud83d\udca9"):e.jsPlumbInstance.connect({source:h,target:k,scope:"varValuePointer"})}function f(h,k){0!=e.domRoot.find("#"+h).length&&0!=e.domRoot.find("#"+k).length&&(e.jsPlumbInstance.connect({source:h,target:k,anchors:["LeftMiddle",
"LeftMiddle"],connector:["Bezier",{curviness:45}],endpoint:["Dot",{radius:4}],scope:"frameParentPointer"}),p++)}function d(h){e.jsPlumbInstance.select().each(function(k){var w=k.source.closest(".stackFrame");w.attr("id")==h?(k.setPaintStyle({lineWidth:1,strokeStyle:connectorBaseColor}),k.endpoints[0].setPaintStyle({fillStyle:connectorBaseColor}),$(k.canvas).css("z-index",1E3)):!e.jsPlumbManager.heapConnectionEndpointIDs.has(k.endpoints[0].elementId)&&0<w.length&&(k.setPaintStyle({lineWidth:1,strokeStyle:connectorInactiveColor}),
k.endpoints[0].setPaintStyle({fillStyle:connectorInactiveColor}),$(k.canvas).css("z-index",0))});e.domRoot.find(".stackFrame").removeClass("highlightedStackFrame");e.domRoot.find("#"+h).addClass("highlightedStackFrame")}var e=this;if(!e.tabularView){e.resetJsPlumbManager();var g=d3.map();e.jsPlumbInstance.select({scope:"varValuePointer"}).each(function(h){h.sourceId.match(heapPtrSrcRE)||g.set(h.sourceId,h.targetId)});var l=d3.map();e.jsPlumbInstance.select({scope:"frameParentPointer"}).each(function(h){l.set(h.sourceId,
h.targetId)});$.each(b,function(h,k){for(h=0;h<k.length;h++){var w=e.generateHeapObjID(k[h],e.curInstr);e.jsPlumbManager.renderedHeapObjectIDs.set(w,1)}});e.domRoot.find("#heap").empty().html('<div id="heapHeader">Objects</div>');b=e.domRootD3.select("#heap").selectAll("table.heapRow").attr("id",function(h,k){return"heapRow"+k}).data(b,function(h){return h[0]});b.enter().append("table").attr("id",function(h,k){return"heapRow"+k}).attr("class","heapRow");b.exit().each(function(h,k){$(this).empty()}).remove();
b=b.selectAll("td.toplevelHeapObject").data(function(h,k){return h.slice(1,h.length)},function(h){return h});b.enter().append("td").attr("class","toplevelHeapObject").attr("id",function(h,k){return"toplevel_heap_object_"+h});b.order().each(function(h,k){$(this).empty();e.isCppMode()?void 0!==a.heap[h]&&e.renderCompoundObject(h,e.curInstr,$(this),!0):e.renderCompoundObject(h,e.curInstr,$(this),!0)});b.exit().each(function(h,k){$(this).empty()}).remove();var r=[];$.each(a.ordered_globals,function(h,
k){void 0!==a.globals[k]&&r.push(k)});var u=e.generateID("globals");b=e.generateID("global_table");b=e.domRootD3.select("#"+b).selectAll("tr").data(r,function(h){return h});b.enter().append("tr").attr("class","variableTr").attr("id",function(h,k){return e.generateID(varnameToCssID("global__"+h+"_tr"))});var n=b.selectAll("td.stackFrameVar,td.stackFrameValue").data(function(h,k){return[h,h]});n.enter().append("td").attr("class",function(h,k){return 0==k?"stackFrameVar":"stackFrameValue"});n.order().each(function(h,
k){if(0==k)$(this).html(h);else if($(this).empty(),k=e.generateID("global__"+varnameToCssID(h)),g.remove(k),h=a.globals[h],e.isPrimitiveType(h))e.renderPrimitiveObject(h,$(this));else if("C_STRUCT"===h[0]||"C_ARRAY"===h[0])e.renderCStructArray(h,e.curInstr,$(this));else{var w=e.generateHeapObjID(getRefID(h),e.curInstr);if(e.textualMemoryLabels){var v=k+"_text_label";$(this).append('<div class="objectIdLabel" id="'+v+'">id'+getRefID(h)+"</div>");$(this).find("div#"+v).hover(function(){e.jsPlumbInstance.connect({source:v,
target:w,scope:"varValuePointer"})},function(){e.jsPlumbInstance.select({source:v}).detach()})}else $(this).append('<div class="stack_pointer" id="'+k+'">&nbsp;</div>'),assert(!e.jsPlumbManager.connectionEndpointIDs.has(k)),e.jsPlumbManager.connectionEndpointIDs.set(k,w)}});n.exit().each(function(h,k){$(this).empty()}).remove();b.exit().each(function(h,k){$(this).find(".stack_pointer").each(function(w,v){g.remove($(v).attr("id"))});$(this).empty()}).remove();0==a.ordered_globals.length?this.domRoot.find("#"+
u).hide():this.domRoot.find("#"+u).show();b=e.domRootD3.select("#stack").selectAll("div.stackFrame,div.zombieStackFrame").data(a.stack_to_render,function(h){return h.unique_hash});n=b.enter().append("div").attr("class",function(h,k){return h.is_zombie?"zombieStackFrame":"stackFrame"}).attr("id",function(h,k){return h.is_zombie?e.generateID("zombie_stack"+k):e.generateID("stack"+k)}).attr("data-frame_id",function(h,k){return h.frame_id}).attr("data-parent_frame_id",function(h,k){return 0<h.parent_frame_id_list.length?
h.parent_frame_id_list[0]:null}).each(function(h,k){if(e.drawParentPointers){var w=$(this).attr("id");0<h.parent_frame_id_list.length?e.domRoot.find("div#stack [data-frame_id="+h.parent_frame_id_list[0]+"]").each(function(v,x){v=$(this).attr("id");e.jsPlumbManager.parentPointerConnectionEndpointIDs.set(w,v)}):0<a.ordered_globals.length&&e.jsPlumbManager.parentPointerConnectionEndpointIDs.set(w,u);e.domRoot.find("div#stack [data-parent_frame_id="+h.frame_id+"]").each(function(v,x){v=$(this).attr("id");
e.jsPlumbManager.parentPointerConnectionEndpointIDs.set(v,w)})}});n.append("div").attr("class","stackFrameHeader").html(function(h,k){k=htmlspecialchars(h.func_name).replace("&lt;lambda&gt;","\u03bb").replace("\n","<br/>");if(h.is_parent||e.showAllFrameLabels)k="f"+h.frame_id+": "+k;0<h.parent_frame_id_list.length?k=k+" [parent=f"+h.parent_frame_id_list[0]+"]":e.showAllFrameLabels&&(k+=" [parent=Global]");return k});n.append("table").attr("class","stackFrameVarTable");n=b.order().select("table").selectAll("tr").data(function(h){return h.ordered_varnames.map(function(k){return{variable:k,
frame:h}})},function(h){if(h)return h.variable.n});n.enter().append("tr").attr("class","variableTr").attr("id",function(h,k){return e.generateID(varnameToCssID(h.frame.unique_hash+"__"+h.variable.n+"_tr"))});var m=n.selectAll("td.stackFrameVar,td.stackFrameValue").data(function(h,k){return[h,h]});m.enter().append("td").attr("class",function(h,k){return 0==k?"stackFrameVar":"stackFrameValue"});m.order().each(function(h,k){val=h.variable;var w=val.n;h=h.frame;if(0==k)"__return__"==w?$(this).html('<span class="retval">Return<br/>value</span>'):
$(this).html(w);else if($(this).empty(),k=e.generateID(varnameToCssID(h.unique_hash+"__"+w)),g.remove(k),e.isPrimitiveType(val))e.renderPrimitiveObject(val,$(this));else if("C_STRUCT"===val[0]||"C_ARRAY"===val[0])e.renderCStructArray(val,e.curInstr,$(this));else{var v=e.generateHeapObjID(getRefID(val),e.curInstr);if(e.textualMemoryLabels){var x=k+"_text_label";$(this).append('<div class="objectIdLabel" id="'+x+'">id'+getRefID(val)+"</div>");$(this).find("div#"+x).hover(function(){e.jsPlumbInstance.connect({source:x,
target:v,scope:"varValuePointer"})},function(){e.jsPlumbInstance.select({source:x}).detach()})}else $(this).append('<div class="stack_pointer" id="'+k+'">&nbsp;</div>'),assert(!e.jsPlumbManager.connectionEndpointIDs.has(k)),e.jsPlumbManager.connectionEndpointIDs.set(k,v)}});m.exit().each(function(h,k){$(this).empty()}).remove();n.exit().each(function(h,k){$(this).find(".stack_pointer").each(function(w,v){g.remove($(v).attr("id"))});$(this).empty()}).remove();b.exit().each(function(h,k){$(this).find(".stack_pointer").each(function(v,
x){g.remove($(x).attr("id"))});var w=$(this).attr("id");l.forEach(function(v,x){v!=w&&x!=w||l.remove(v)});$(this).empty()}).remove();if(rightwardNudgeHack){var q={};b=e.jsPlumbManager.heapConnectionEndpointIDs.keys();b.sort();$.each(b,function(h,k){h=e.jsPlumbManager.heapConnectionEndpointIDs.get(k);var w=e.domRoot.find("#"+k);k=w.closest(".heapObject");h=e.domRoot.find("#"+h);assert("heapObject"==h.attr("class"));var v=k.closest(".heapRow"),x=h.closest(".heapRow"),A=v.attr("id");v=x.attr("id");if(A!=
v&&(w=w.offset().left,k.offset(),k=h.offset().left,w>k)){var C=w-k+32;h.css("margin-left","+="+C);var z=q[A];void 0===z&&(z=d3.map(),q[A]=z);z.set(v,1);(k=q[v])&&k.forEach(function(B,G){B!=A&&(e.domRoot.find("#"+B).css("margin-left","+="+C),z.set(B,1))})}})}e.jsPlumbInstance.reset();var p=0;e.textualMemoryLabels||(e.isCppMode()||g.forEach(c),e.jsPlumbManager.connectionEndpointIDs.forEach(c));e.drawParentPointers&&(l.forEach(f),e.jsPlumbManager.parentPointerConnectionEndpointIDs.forEach(f));var t=
!1;$.each(a.stack_to_render,function(h,k){k.is_highlighted&&(d(e.generateID("stack"+h)),t=!0)});t||d(e.generateID("globals"));e.try_hook("end_renderDataStructures",{myViz:e})}};
ExecutionVisualizer.prototype.renderTabularView=function(){function a(u){var n=[""];$.each(c,function(q,p){n.push(u.globals[p])});var m=null;$.each(u.stack_to_render,function(q,p){p.is_highlighted&&(m=p)});$.each(d,function(q,p){$.each(f[p],function(t,h){t=!1;m&&p==m.func_name&&(h=m.encoded_locals[h])&&(n.push(h),t=!0);t||n.push(void 0)})});return n}var b=this;b.resetJsPlumbManager();var c=[],f={},d=[];$.each(b.curTrace,function(u,n){$.each(n.ordered_globals,function(m,q){-1===$.inArray(q,c)&&c.push(q)});
$.each(n.stack_to_render,function(m,q){var p=f[q.func_name];void 0===p&&(p=[],f[q.func_name]=p,d.push(q.func_name));$.each(q.ordered_varnames,function(t,h){-1===$.inArray(h.n,p)&&"__return__"!==h.n&&p.push(h.n)})})});var e=["Step"];$.each(c,function(u,n){e.push(n)});$.each(d,function(u,n){$.each(f[n],function(m,q){e.push(n+":"+q)})});var g=b.domRootD3.select("#optTabularView").append("table");g.attr("id","optTable");var l=g.append("thead").attr("class","stepTableThead").append("tr");l.attr("class",
"stepTableTr");l.selectAll("thead td").data(e).enter().append("td").attr("class","stepTableTd").html(function(u){return u});g=g.append("tbody");g.attr("class","stepTableTbody");var r=[];$.each(b.curTrace,function(u,n){r.push([u,n])});g.selectAll("tbody tr").data(r).enter().append("tr").attr("step",function(u,n){return n}).attr("class","stepTableTr").selectAll("td").data(function(u){return a(u[1])}).enter().append("td").attr("class","stepTableTd").each(function(u,n){$(this).empty();var m=parseInt($(this).closest("tr").attr("step"));
0==n?$(this).html(m+1):void 0!==u&&b.renderNestedObject(u,m,$(this),"tabular")});b.jsPlumbInstance.reset();b.jsPlumbManager.connectionEndpointIDs.forEach(function(u,n){b.jsPlumbInstance.connect({source:u,target:n,scope:"varValuePointer",anchors:["TopCenter","LeftMiddle"]})})};
ExecutionVisualizer.prototype.renderPrimitiveObject=function(a,b){if(!this.try_hook("renderPrimitiveObject",{obj:a,d3DomElement:b})[0]){var c=typeof a;if(null==a)b.append('<span class="nullObj">'+this.getRealLabel("None")+"</span>");else if("number"==c)b.append('<span class="numberObj">'+a+"</span>");else if("boolean"==c)a?b.append('<span class="boolObj">'+this.getRealLabel("True")+"</span>"):b.append('<span class="boolObj">'+this.getRealLabel("False")+"</span>");else if("string"==c)a=htmlspecialchars(a),
a=a.replace(/\n/g,"<br/>"),a=a.replace(/"/g,'\\"'),b.append('<span class="stringObj">"'+(a+'"</span>'));else if("object"==c)if("C_DATA"==a[0]||"C++_REF"==a[0]){var f=a[2];"short int"===f?f="short":"short unsigned int"===f?f="unsigned short":"long int"===f?f="long":"long long int"===f?f="long long":"long unsigned int"===f?f="unsigned long":"long long unsigned int"===f&&(f="unsigned long long int");var d=("C++_REF"==a[0]||"pointer"===f)&&"<UNINITIALIZED>"!==a[3]&&"<UNALLOCATED>"!==a[3],e=a[1],g="";
if(this.debugMode||this.showAddr)g=e+"<br/>";c=this.generateHeapObjID("cdata_"+e,this.curInstr);d?(b.append('<div id="'+c+'" class="cdataHeader">'+g+f+"</div>"),c="C++_REF"==a[0]?a[1]:a[3],f=this.generateHeapObjID("ptrSrc_"+e,this.curInstr),d=this.generateHeapObjID("cdata_"+c,this.curInstr),e="",this.debugMode?e=d:"C++_REF"==a[0]?e=a[3]:this.showAddr&&(e=c),b.append('<div id="'+f+'" class="cdataElt">'+e+"</div>"),assert(!this.jsPlumbManager.connectionEndpointIDs.has(f)),this.jsPlumbManager.connectionEndpointIDs.set(f,
d)):(b.append('<div class="cdataHeader">'+g+f+"</div>"),"string"===typeof a[3]?(a=a[3],"<UNINITIALIZED>"===a?e='<span class="cdataUninit">?</span>':"<UNALLOCATED>"==a?e="\ud83d\udc80":(a=a.replace(/\n/g,"\\n"),a=a.replace(/\t/g,"\\t"),a=a.replace(/"/g,'\\"'),e=htmlspecialchars("'"+a+"'"))):e=htmlspecialchars(a[3]),b.append('<div id="'+c+'" class="cdataElt">'+e+"</div>"))}else assert("SPECIAL_FLOAT"==a[0]||"JS_SPECIAL_VAL"==a[0]),b.append('<span class="numberObj">'+a[1]+"</span>");else assert(!1)}};
ExecutionVisualizer.prototype.renderNestedObject=function(a,b,c){this.isPrimitiveType(a)?this.renderPrimitiveObject(a,c):"REF"===a[0]?this.renderCompoundObject(getRefID(a),b,c,!1):(assert("C_STRUCT"===a[0]||"C_ARRAY"===a[0]),this.renderCStructArray(a,b,c))};
ExecutionVisualizer.prototype.renderCompoundObject=function(a,b,c,f){var d=this,e=d.generateHeapObjID(a,b);if(!f&&d.jsPlumbManager.renderedHeapObjectIDs.has(e)){var g=d.generateID("heap_pointer_src_"+d.jsPlumbManager.heap_pointer_src_id);d.jsPlumbManager.heap_pointer_src_id++;if(d.textualMemoryLabels){var l=g+"_text_label";c.append('<div class="objectIdLabel" id="'+l+'">id'+a+"</div>");d.domRoot.find("div#"+l).hover(function(){d.jsPlumbInstance.connect({source:l,target:e,scope:"varValuePointer"})},
function(){d.jsPlumbInstance.select({source:l}).detach()})}else c.append('<div id="'+g+'">&nbsp;</div>'),assert(!d.jsPlumbManager.connectionEndpointIDs.has(g)),d.jsPlumbManager.connectionEndpointIDs.set(g,e),assert(!d.jsPlumbManager.heapConnectionEndpointIDs.has(g)),d.jsPlumbManager.heapConnectionEndpointIDs.set(g,e)}else{c.append('<div class="heapObject" id="'+e+'"></div>');c=d.domRoot.find("#"+e);d.jsPlumbManager.renderedHeapObjectIDs.set(e,1);g=d.curTrace[b].heap[a];assert($.isArray(g));var r=
"";d.textualMemoryLabels&&(r="id"+a+":");if(!d.try_hook("renderCompoundObject",{objID:a,d3DomElement:c,isTopLevel:f,obj:g,typeLabelPrefix:r,stepNum:b,myViz:d})[0])if("LIST"==g[0]||"TUPLE"==g[0]||"SET"==g[0]||"DICT"==g[0]){var u=g[0].toLowerCase();assert(1<=g.length);if(1==g.length)c.append('<div class="typeLabel">'+r+" empty "+d.getRealLabel(u)+"</div>");else{c.append('<div class="typeLabel">'+r+d.getRealLabel(u)+"</div>");c.append('<table class="'+u+'Tbl"></table>');var n=c.children("table");if("LIST"==
g[0]||"TUPLE"==g[0]){n.append("<tr></tr><tr></tr>");var m=n.find("tr:first"),q=n.find("tr:last");$.each(g,function(k,w){1>k||(m.append('<td class="'+u+'Header"></td>'),m.find("td:last").append(k-1),q.append('<td class="'+u+'Elt"></td>'),d.renderNestedObject(w,b,q.find("td:last")))})}else if("SET"==g[0]){r=g.length-1;a=Math.round(Math.sqrt(r));3<a&&--a;var p=Math.round(r/a);r%a&&(p+=1);jQuery.each(g,function(k,w){1>k||(0==(k-1)%p&&n.append("<tr></tr>"),k=n.find("tr:last"),k.append('<td class="setElt"></td>'),
d.renderNestedObject(w,b,k.find("td:last")))})}else"DICT"==g[0]&&$.each(g,function(k,w){if(!(1>k)){n.append('<tr class="dictEntry"><td class="dictKey"></td><td class="dictVal"></td></tr>');var v=n.find("tr:last");k=v.find("td:first");v=v.find("td:last");var x=w[1];d.renderNestedObject(w[0],b,k);d.renderNestedObject(x,b,v)}})}}else if("INSTANCE"==g[0]||"CLASS"==g[0]){var t=(a="INSTANCE"==g[0])?2:3;assert(g.length>=t);a?c.append('<div class="typeLabel">'+r+g[1]+" "+d.getRealLabel("instance")+"</div>"):
(f="",0<g[2].length&&(f+="[extends "+g[2].join(", ")+"] "),c.append('<div class="typeLabel">'+r+g[1]+" class "+f+'<br/><a href="#" id="attrToggleLink">hide attributes</a></div>'));if(g.length>t){var h=a?"inst":"class";c.append('<table class="'+h+'Tbl"></table>');n=c.children("table");$.each(g,function(k,w){if(!(k<t)){n.append('<tr class="'+h+'Entry"><td class="'+h+'Key"></td><td class="'+h+'Val"></td></tr>');var v=n.find("tr:last");k=v.find("td:first");v=v.find("td:last");if("string"==typeof w[0]){var x=
htmlspecialchars(w[0]);k.append('<span class="keyObj">'+x+"</span>")}else d.renderNestedObject(w[0],b,k);d.renderNestedObject(w[1],b,v)}})}a||($(c.selector+" .typeLabel #attrToggleLink").click(function(){var k=$(c.selector+" .classTbl");k.toggle();$(this).html((k.is(":visible")?"hide":"show")+" attributes");k.is(":visible")?(d.classAttrsHidden[c.selector]=!1,$(this).html("hide attributes")):(d.classAttrsHidden[c.selector]=!0,$(this).html("show attributes"));d.redrawConnectors();return!1}),d.classAttrsHidden[c.selector]&&
($(c.selector+" .classTbl").hide(),$(c.selector+" .typeLabel #attrToggleLink").html("show attributes")))}else"INSTANCE_PPRINT"==g[0]?(c.append('<div class="typeLabel">'+r+g[1]+" instance</div>"),g=htmlspecialchars(g[2]),c.append('<table class="customObjTbl"><tr><td class="customObjElt">'+g+"</td></tr></table>")):"FUNCTION"==g[0]?(assert(3==g.length),a=htmlspecialchars(g[1]).replace("&lt;lambda&gt;","\u03bb"),g=g[2],d.compactFuncLabels||c.append('<div class="typeLabel">'+r+d.getRealLabel("function")+
"</div>"),r=d.compactFuncLabels?"func":"",g?c.append('<div class="funcObj">'+r+" "+a+" [parent=f"+g+"]</div>"):d.showAllFrameLabels?c.append('<div class="funcObj">'+r+" "+a+" [parent=Global]</div>"):c.append('<div class="funcObj">'+r+" "+a+"</div>")):"JS_FUNCTION"==g[0]?(assert(5==g.length),a=htmlspecialchars(g[1]),r+=htmlspecialchars(g[2]),a=g[3],g=g[4],a||g||d.showAllFrameLabels?(c.append('<table class="classTbl"></table>'),n=c.children("table"),n.append('<tr><td class="funcCod" colspan="2"><pre class="funcCode">'+
r+"</pre></td></tr>"),a&&(assert(0<a.length),$.each(a,function(k,w){n.append('<tr class="classEntry"><td class="classKey"></td><td class="classVal"></td></tr>');var v=n.find("tr:last");k=v.find("td:first");v=v.find("td:last");k.append('<span class="keyObj">'+htmlspecialchars(w[0])+"</span>");d.renderNestedObject(w[1],b,v)})),g?n.append('<tr class="classEntry"><td class="classKey">parent</td><td class="classVal">f'+g+"</td></tr>"):d.showAllFrameLabels&&n.append('<tr class="classEntry"><td class="classKey">parent</td><td class="classVal">global</td></tr>')):
c.append('<pre class="funcCode">'+r+"</pre>")):"HEAP_PRIMITIVE"==g[0]?(assert(3==g.length),a=g[1],g=g[2],c.append('<div class="heapPrimitive"></div>'),c.find("div.heapPrimitive").append('<div class="typeLabel">'+r+a+"</div>"),d.renderPrimitiveObject(g,c.find("div.heapPrimitive"))):"C_STRUCT"==g[0]||"C_ARRAY"==g[0]?d.renderCStructArray(g,b,c):(assert(2==g.length),a=g[0],g=g[1],g=htmlspecialchars(g),c.append('<div class="typeLabel">'+r+a+"</div>"),c.append('<table class="customObjTbl"><tr><td class="customObjElt">'+
g+"</td></tr></table>"))}};
ExecutionVisualizer.prototype.renderCStructArray=function(a,b,c){var f=this;if("C_STRUCT"==a[0]){assert(3<=a.length);var d=a[1],e=a[2],g="";if(f.debugMode||f.showAddr)g=d+"<br/>";"cpp"===f.params.lang?c.append('<div class="typeLabel">'+g+"object "+e+"</div>"):c.append('<div class="typeLabel">'+g+"struct "+e+"</div>");if(3<a.length){c.append('<table class="instTbl"></table>');var l=c.children("table");$.each(a,function(n,m){if(!(3>n)){l.append('<tr class="instEntry"><td class="instKey"></td><td class="instVal"></td></tr>');var q=
l.find("tr:last");n=q.find("td:first");q=q.find("td:last");assert("string"==typeof m[0]);var p=htmlspecialchars(m[0]);n.append('<span class="keyObj">'+p+"</span>");f.renderNestedObject(m[1],b,q)}})}}else{assert("C_ARRAY"==a[0]);assert(2<=a.length);d=a[1];g="";if(f.debugMode||f.showAddr)g=d+"<br/>";c.append('<div class="typeLabel">'+g+"array</div>");c.append('<table class="cArrayTbl"></table>');l=c.children("table");l.append("<tr></tr><tr></tr>");var r=l.find("tr:first"),u=l.find("tr:last");$.each(a,
function(n,m){2>n||(r.append('<td class="cArrayHeader"></td>'),r.find("td:last").append(n-2),u.append('<td class="cArrayElt"></td>'),f.renderNestedObject(m,b,u.find("td:last")))})}};ExecutionVisualizer.prototype.redrawConnectors=function(){this.jsPlumbInstance.repaintEverything()};
ExecutionVisualizer.prototype.getRealLabel=function(a){if("js"===this.params.lang||"ts"===this.params.lang||"ruby"===this.params.lang){if("list"===a)return"array";if("instance"===a)return"object";if("True"===a)return"true";if("False"===a)return"false"}if("js"===this.params.lang){if("dict"===a)return"Map";if("set"===a)return"Set"}if("ruby"===this.params.lang){if("dict"===a)return"hash";if("set"===a)return"Set";if("function"===a)return"method";if("None"===a)return"nil";if("Global frame"===a)return"Global Object"}return a};
var highlightedLineColor="#e4faeb",highlightedLineBorderColor="#005583",highlightedLineLighterColor="#e8fff0",funcCallLineColor="#a2eebd",brightRed="#e93f34",connectorBaseColor="#005583",connectorHighlightColor=brightRed,connectorInactiveColor="#cccccc",errorColor=brightRed,breakpointColor=brightRed,darkArrowColor=brightRed,lightArrowColor="#c9e6ca";function assert(a){if(!a)throw alert("Assertion Failure (see console log for backtrace)"),"Assertion Failure";}
function htmlspecialchars(a){"string"==typeof a&&(a=a.replace(/&/g,"&amp;"),a=a.replace(/</g,"&lt;"),a=a.replace(/>/g,"&gt;"),a=a.replace(/ /g,"&nbsp;"),a=a.replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;"));return a}function htmlsanitize(a){"string"==typeof a&&(a=a.replace(/&/g,"&amp;"),a=a.replace(/</g,"&lt;"),a=a.replace(/>/g,"&gt;"));return a}String.prototype.rtrim=function(){return this.replace(/\s*$/g,"")};var lbRE=/\[|{|\(|</g,rbRE=/\]|}|\)|>/g;
function varnameToCssID(a){return a.replace(lbRE,"LeftB_").replace(rbRE,"_RightB").replace(/[!]/g,"_BANG_").replace(/[?]/g,"_QUES_").replace(/[:]/g,"_COLON_").replace(/[=]/g,"_EQ_").replace(/[.]/g,"_DOT_").replace(/ /g,"_")}
ExecutionVisualizer.prototype.structurallyEquivalent=function(a,b){if(this.isPrimitiveType(a)||this.isPrimitiveType(b)||a[0]!=b[0]||a.length!=b.length)return!1;if("LIST"!=a[0]&&"TUPLE"!=a[0]){if("DICT"==a[0])var c=2;else if("INSTANCE"==a[0])c=3;else return!1;for(var f=d3.map(),d=c;d<a.length;d++)f.set(a[d][0],1);for(d=c;d<b.length;d++)if(!f.has(b[d][0]))return!1}return!0};
ExecutionVisualizer.prototype.isPrimitiveType=function(a){var b=this.try_hook("isPrimitiveType",{obj:a});return b[0]?b[1]:null===a?!0:"object"==typeof a?"SPECIAL_FLOAT"==a[0]||"JS_SPECIAL_VAL"==a[0]||"C_DATA"==a[0]||"C++_REF"==a[0]:!0};function isHeapRef(a,b){return"REF"===a[0]?void 0!==b[a[1]]:"C_DATA"===a[0]&&"pointer"===a[2]&&"<UNINITIALIZED>"!=a[3]&&"<UNALLOCATED>"!=a[3]?void 0!==b[a[3]]:!1}
function getRefID(a){if("REF"==a[0])return a[1];assert("C++_REF"===a[0]||"C_DATA"===a[0]&&"pointer"===a[2]);assert("<UNINITIALIZED>"!=a[3]&&"<UNALLOCATED>"!=a[3]);return a[3]}var qtipShared={show:{ready:!0,delay:0,event:null,effect:function(){$(this).show()}},hide:{fixed:!0,event:null,effect:function(){$(this).hide()}},style:{classes:"ui-tooltip-pgbootstrap"}};
function AnnotationBubble(a,b,c){this.parentViz=a;this.domID=c;this.hashID="#"+c;this.type=b;"codeline"==b?(this.my="left center",this.at="right center"):"frame"==b?(this.my="right center",this.at="left center"):"variable"==b?(this.my="right center",this.at="left center"):"object"==b?(this.my="bottom left",this.at="top center"):assert(!1);this.state="invisible";this.text="";this.qtipHidden=!1}
AnnotationBubble.prototype.showStub=function(){assert("invisible"==this.state||"edit"==this.state);assert(""==this.text);var a=this;this.destroyQTip();$(this.hashID).qtip($.extend({},qtipShared,{content:" ",id:this.domID,position:{my:this.my,at:this.at,adjust:{x:"codeline"==a.type?-6:0},effect:null},style:{classes:"ui-tooltip-pgbootstrap ui-tooltip-pgbootstrap-stub"}}));$(this.qTipID()).unbind("click").click(function(){a.showEditor()});this.state="stub"};
AnnotationBubble.prototype.showEditor=function(){assert("stub"==this.state||"view"==this.state||"minimized"==this.state);var a=this,b='<textarea class="bubbleInputText">'+this.text+"</textarea>";this.destroyQTip();$(this.hashID).qtip($.extend({},qtipShared,{content:b,id:this.domID,position:{my:this.my,at:this.at,adjust:{x:"codeline"==a.type?-6:0},effect:null}}));$(this.qTipContentID()).find("textarea.bubbleInputText").blur(function(){a.text=$(this).val().trim();a.text?a.showViewer():a.showStub()}).focus();
this.state="edit"};AnnotationBubble.prototype.bindViewerClickHandler=function(){var a=this;$(this.qTipID()).unbind("click").click(function(){a.parentViz.editAnnotationMode?a.showEditor():a.minimizeViewer()})};
AnnotationBubble.prototype.showViewer=function(){assert("edit"==this.state||"invisible"==this.state);assert(this.text);this.destroyQTip();$(this.hashID).qtip($.extend({},qtipShared,{content:htmlsanitize(this.text),id:this.domID,position:{my:this.my,at:this.at,adjust:{x:"codeline"==this.type?-6:0},effect:null}}));this.bindViewerClickHandler();this.state="view"};
AnnotationBubble.prototype.minimizeViewer=function(){assert("view"==this.state);var a=this;$(this.hashID).qtip("option","content.text"," ");$(this.qTipID()).unbind("click").click(function(){a.parentViz.editAnnotationMode?a.showEditor():a.restoreViewer()});this.state="minimized"};AnnotationBubble.prototype.restoreViewer=function(){assert("minimized"==this.state);$(this.hashID).qtip("option","content.text",htmlsanitize(this.text));this.bindViewerClickHandler();this.state="view"};
AnnotationBubble.prototype.makeInvisible=function(){assert("stub"==this.state||"edit"==this.state);this.destroyQTip();this.state="invisible"};AnnotationBubble.prototype.destroyQTip=function(){$(this.hashID).qtip("destroy")};AnnotationBubble.prototype.qTipContentID=function(){return"#ui-tooltip-"+this.domID+"-content"};AnnotationBubble.prototype.qTipID=function(){return"#ui-tooltip-"+this.domID};
AnnotationBubble.prototype.enterEditMode=function(){assert(this.parentViz.editAnnotationMode);"invisible"==this.state&&(this.showStub(),"codeline"==this.type&&this.redrawCodelineBubble())};
AnnotationBubble.prototype.enterViewMode=function(){assert(!this.parentViz.editAnnotationMode);"stub"==this.state?this.makeInvisible():"edit"==this.state?(this.text=$(this.qTipContentID()).find("textarea.bubbleInputText").val().trim())?(this.showViewer(),"codeline"==this.type&&this.redrawCodelineBubble()):this.makeInvisible():"invisible"==this.state&&this.text&&(this.showViewer(),"codeline"==this.type&&this.redrawCodelineBubble())};
AnnotationBubble.prototype.preseedText=function(a){assert("invisible"==this.state);this.text=a};AnnotationBubble.prototype.redrawCodelineBubble=function(){assert("codeline"==this.type);isOutputLineVisibleForBubbles(this.domID)?(this.qtipHidden?$(this.hashID).qtip("show"):$(this.hashID).qtip("reposition"),this.qtipHidden=!1):($(this.hashID).qtip("hide"),this.qtipHidden=!0)};AnnotationBubble.prototype.redrawBubble=function(){$(this.hashID).qtip("reposition")};
function isOutputLineVisibleForBubbles(a){var b=$("#pyCodeOutputDiv");a=$("#"+a).offset().top;var c=b.offset().top;b.scrollTop();b=b.height();return c<=a&&a<c+b-25}function traceQCheckMe(a,b,c){var f=$("#"+b).data("vis"),d=f.curInstr,e=f.curTrace[d+1];a=$("#"+a).val();c=c.split(".");for(var g in c)e=e[c[g]];b=$("#"+b+"_feedbacktext");0<a.length&&a==e?b.html("Correct"):b.html(f.curTrace[d].question.feedback)}function closeModal(a){$.modal.close();$("#"+a).data("vis").stepForward()}
ExecutionVisualizer.prototype.activateJavaFrontend=function(){var a=null;this.curTrace.forEach(function(d,e){"exception"!==d.event||d.line||(d.line=a);void 0!==d.stack_to_render&&d.stack_to_render.reverse();a=d.line});this.add_pytutor_hook("renderPrimitiveObject",function(d){var e=d.obj;d=d.d3DomElement;var g=typeof e;if(null==e)d.append('<span class="nullObj">null</span>');else if("number"==g)d.append('<span class="numberObj">'+e+"</span>");else if("boolean"==g)e?d.append('<span class="boolObj">true</span>'):
d.append('<span class="boolObj">false</span>');else if(e instanceof Array&&"VOID"==e[0])d.append('<span class="voidObj">void</span>');else if(e instanceof Array&&"NUMBER-LITERAL"==e[0])d.append('<span class="numberObj">'+e[1]+"</span>");else if(e instanceof Array&&"CHAR-LITERAL"==e[0]){g=e[1].charCodeAt(0);e=e[1];for(var l=g.toString(16);4>l.length;)l="0"+l;l="\\u"+l;"\n"==e?l="\\n":"\r"==e?l="\\r":"\t"==e?l="\\t":"\b"==e?l="\\b":"\f"==e?l="\\f":"'"==e?l="\\'":'"'==e?l='\\"':"\\"==e?l="\\\\":32<=
g&&(l=e);d.append('<span class="stringObj">\''+l+"'</span>")}else return[!1];return[!0]});this.add_pytutor_hook("isPrimitiveType",function(d){d=d.obj;return d instanceof Array&&"VOID"==d[0]||d instanceof Array&&"NUMBER-LITERAL"==d[0]||d instanceof Array&&"CHAR-LITERAL"==d[0]||d instanceof Array&&"ELIDE"==d[0]?[!0,!0]:[!1]});this.add_pytutor_hook("end_updateOutput",function(d){d=d.myViz;var e=d.curTrace[d.curInstr];d.params.stdin&&""!=d.params.stdin&&(e=e.stdinPosition||0,e='<span style="color:lightgray;text-decoration: line-through">'+
f(d.params.stdin.substr(0,e))+"</span>"+f(d.params.stdin.substr(e)),d.domRoot.find("#stdinShow").html(e));return[!1]});this.add_pytutor_hook("end_constructor",function(d){d=d.myViz;0<d.curTrace.length&&d.curTrace[d.curTrace.length-1]&&d.curTrace[d.curTrace.length-1].stdout?(d.hasStdout=!0,d.stdoutLines=d.curTrace[d.curTrace.length-1].stdout.split("\n").length):1<d.curTrace.length&&d.curTrace[d.curTrace.length-2]&&d.curTrace[d.curTrace.length-2].stdout?(d.hasStdout=!0,d.stdoutLines=d.curTrace[d.curTrace.length-
2].stdout.split("\n").length):d.stdoutLines=-1;if(d.hasStdout)for(var e=0;e<d.curTrace.length;e++)d.curTrace[e].stdout||(d.curTrace[e].stdout=" ")});this.add_pytutor_hook("end_render",function(d){d=d.myViz;d.params.stdin&&""!=d.params.stdin&&d.domRoot.find("#dataViz").append('<div id="stdinWrap">stdin:<pre id="stdinShow" style="border:1px solid gray"></pre></div>');d.domRoot.find("#"+d.generateID("globals_header")).html("Static fields")});this.add_pytutor_hook("isLinearObject",function(d){d=d.heapObj;
return"STACK"==d[0]||"QUEUE"==d[0]?["true","true"]:["false"]});this.add_pytutor_hook("renderCompoundObject",function(d){var e=d.d3DomElement,g=d.obj,l=d.typeLabelPrefix,r=d.myViz,u=d.stepNum;if("LIST"!=g[0]&&"QUEUE"!=g[0]&&"STACK"!=g[0])return[!1];var n=g[0].toLowerCase();d={list:"array",queue:"queue",stack:"stack"}[n];if(1==g.length)return e.append('<div class="typeLabel">'+l+"empty "+d+"</div>"),[!0];e.append('<div class="typeLabel">'+l+d+"</div>");e.append('<table class="'+n+'Tbl"></table>');e=
e.children("table");if("LIST"==g[0]){e.append("<tr></tr><tr></tr>");l=e.find("tr:first");var m=e.find("tr:last");d=1;for(var q=0;d<g.length;d++){var p=g[d],t=p instanceof Array&&"ELIDE"==p[0];l.append('<td class="'+n+'Header"></td>');l.find("td:last").append(t?"&hellip;":q);m.append('<td class="'+n+'Elt"></td>');t?(m.find("td:last").append("&hellip;"),q+=p[1]):(r.renderNestedObject(p,u,m.find("td:last")),q++)}}"STACK"==g[0]&&(e.append("<tr></tr><tr></tr>"),m=e.find("tr:last"),m.append('<td class="'+
n+'FElt"><span class="stringObj symbolic">&#8596;</span></td>'),$.each(g,function(h,k){1>h||(m.append('<td class="'+n+'Elt"></td>'),r.renderNestedObject(k,u,m.find("td:last")))}),m.append('<td class="'+n+'LElt"></td>'));"QUEUE"==g[0]&&(e.append("<tr></tr><tr></tr>"),m=e.find("tr:last"),m.append('<td class="'+n+'FElt"><span class="stringObj symbolic">&#8592;</span></td>'),$.each(g,function(h,k){1>h||(m.append('<td class="'+n+'Elt"></td>'),r.renderNestedObject(k,u,m.find("td:last")))}),m.append('<td class="'+
n+'LElt"><span class="stringObj symbolic">&#8592;</span></td>'));return[!0]});this.add_pytutor_hook("end_renderDataStructures",function(d){d=d.myViz;d.domRoot.find("td.instKey:contains('___NO_LABEL!___')").hide();d.domRoot.find(".typeLabel:contains('dict')").each(function(e){"dict"==$(this).html()&&$(this).html("symbol table");"empty dict"==$(this).html()&&$(this).html("empty symbol table")})});var b=ExecutionVisualizer.prototype.generateID.bind(this);this.generateID=function(d){d=d.replace(/[^0-9a-zA-Z_]/g,
function(e){return"-"+e.charCodeAt(0)+"-"});return b(d)};var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},f=function(d){return String(d).replace(/[&<>"'\/]/g,function(e){return c[e]})}};
